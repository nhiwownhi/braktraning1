<!DOCTYPE html>
<html lang="sv">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<head>
  
  <meta charset="UTF-8">
  <title>Br√•kuppgifter</title>
  <link rel="stylesheet" href="style.css">

  <!-- Favicon-l√§nkar -->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 
</head>
<body>
  <div class=""hero"></div>
<!-- Navigation -->
<nav class="navbar">
  <div class="nav-title"> Br√•ktr√§ning</div>
  <div class="nav-links">
    <button onclick="showIntro()">Start</button>
    <button onclick="startExercises()">Br√•k√∂vningar</button>
    <button onclick="showSelfTest()">Testa dig sj√§lv</button>
    <button onclick="showMyResults()">üìä Mina resultat</button>
    <button id="logoutBtn" onclick="logout()" style="display: none;">üö™ Logga ut</button>
  </div>
  <div id="loginIndicator" style="margin-left: 1rem; font-weight: bold;"></div>
</nav>

<div id="bubbleWrapper" class="bubbles">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
  <img src="bubble.png">
</div>



<!-- INLOGGNING -->
<section id="loginSection">
  <div class="login-wrapper">
    <div class="login-content">
      <h2>V√§lkommen till br√•ktr√§ning!</h2>
      <p>Logga in f√∂r att komma √•t √∂vningar och tester.</p>

      <div id="loginBox">
        <h2>Logga in</h2>
        <input type="text" id="username" placeholder="Anv√§ndarnamn">
        <button onclick="login()">Logga in</button>
        <p id="loginStatus"></p>
      </div>
    </div>
  </div>
</section>

  

<!-- V√ÑLKOMST & NAVIGATION -->
<section id="introSection" style="display: none;">
  <div id="welcomeBox">
    <h2>V√§lkommen till br√•ktr√§ning!</h2>
    <p>H√§r kan du v√§lja mellan att f√• en kort genomg√•ng av olika typer av br√•kr√§kning eller √∂va direkt med interaktiva uppgifter.</p>
    <button onclick="showInfo()">üîé Genomg√•ng</button>
    <button onclick="startExercises()">üìù Br√•k√∂vningar</button>
    <button onclick="showSelfTest()">üöÄ Testa dig sj√§lv</button>
    <button onclick="showMyResults()">üìä Mina resultat</button>
  </div>
</section>


<!-- Beh√•ller div f√∂r layoutfunktioner, men tar bort bilden -->
<div id="introImage"></div>



<!-- Kategoriv√§ljare -->
<section id="categorySection" style="display: none;">
  <h2>üéØ V√§lj kategori att √∂va p√•</h2>
  <!-- üìò Exempelkort -->
  <div class="info-block" id="categoryExample" style="display: none;">
    <h3>Exempel:</h3>
    <p id="exampleText">H√§r visas ett exempel beroende p√• vald kategori</p>
  </div>
  <div class="category-buttons card-grid">
  <div class="card">
    <button onclick="startCategory('fraction')">‚ûï Addition</button>
  </div>
  <div class="card">
    <button onclick="startCategory('subtraction')">‚ûñ Subtraktion</button>
  </div>
  <div class="card">
    <button onclick="startCategory('multiplication')">‚úñÔ∏è Multiplikation</button>
  </div>
  <div class="card">
    <button onclick="startCategory('division')">‚ûó Division</button>
  </div>
  <div class="card">
    <button onclick="startCategory('compare_order')">üìä J√§mf√∂relse & Ordning</button>
  </div>
  <div class="card">
    <button onclick="startCategory('equation')">üß© Ekvationer</button>
  </div>
  <div class="card">
    <button onclick="startCategory('word problem')">üìò Textuppgifter</button>
  </div>
  <div class="card">
    <button onclick="startCategory('all')">üìö Alla uppgifter</button>
  </div>
</div>


  </div>
</section>

<!-- üî∞ Intro f√∂r kategori -->
<section id="categoryIntroSection" style="display: none;">
  <div class="info-block">
    <h2 id="categoryIntroTitle">üîç Kategori-intro</h2>
    <p id="categoryIntroText"></p>
    <div style="text-align: center; margin-top: 20px;">
      <button onclick="beginCategoryExercise()"> B√∂rja √∂vningen</button>
    </div>
  </div>
</section>


<!-- Genomg√•ngssektion -->
<!-- Genomg√•ngssektion -->
<section id="infoSection" style="display: none;">
  <h2>üìö Genomg√•ng av br√•kr√§kning</h2>

 

  <!-- Kategoriknappar som cards -->
  <div class="card-grid">
    <div class="card"><button onclick="showTopic('intro')">üìå Introduktion till br√•k</button></div>
    <div class="card"><button onclick="showTopic('add')">‚ûï Addition av br√•k</button></div>
    <div class="card"><button onclick="showTopic('sub')">‚ûñ Subtraktion av br√•k</button></div>
    <div class="card"><button onclick="showTopic('mult')">‚úñÔ∏è Multiplikation av br√•k</button></div>
    <div class="card"><button onclick="showTopic('div')">‚ûó Division av br√•k</button></div>
  </div>

  <!-- Dynamiskt inneh√•ll visas h√§r -->
  <div id="topicContent" class="info-block" style="margin-top: 20px;"></div>

  <button onclick="showIntro()">Tillbaka</button>
</section>

<!-- √ñvningssektion -->
<section id="exerciseSection" style="display: none;">
  <h1>Br√•ktr√§ning</h1>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>  
  <div id="categoryIntro" class="category-intro"></div>
  <div id="taskNumber" class="task-number"></div> <!-- H√§r visas uppgiftsnumret -->
  <div class="question" id="question"></div> <!-- H√§r visas sj√§lva fr√•gan -->


  <!-- üí° NY Tips-knapp h√§r -->
<div style="margin: 10px 0;">
  <button onclick="showTip()">üí° Tips</button>
</div>
<div id="tipBox" class="tip-box"></div>


  <div id="questionImageWrapper" style="text-align: center; margin-top: 20px;">
  <img id="questionImage" src="" alt="Bild f√∂r uppgiften" style="max-width: 800px; display: none;">  

<input type="text" id="answerInput" placeholder="Skriv ditt svar h√§r">

<!-- üßÆ Minir√§knare-knapp -->
<button onclick="toggleCalculator()">üßÆ Minir√§knare</button>


<!-- üßÆ Flyttbar minir√§knare -->
<div id="calculator" class="calculator">
  <div id="calcHeader" class="calculator-header">
    Minir√§knare
    <button onclick="toggleCalculator()" class="calculator-close">‚ùå</button>
  </div>

  <div class="calculator-body">
    <input type="text" id="calcDisplay" class="calculator-display" readonly>
    <div class="calculator-grid">
      <button onclick="calcInput('7')">7</button>
      <button onclick="calcInput('8')">8</button>
      <button onclick="calcInput('9')">9</button>
      <button onclick="calcInput('/')">/</button>
      <button onclick="calcInput('4')">4</button>
      <button onclick="calcInput('5')">5</button>
      <button onclick="calcInput('6')">6</button>
      <button onclick="calcInput('*')">√ó</button>
      <button onclick="calcInput('1')">1</button>
      <button onclick="calcInput('2')">2</button>
      <button onclick="calcInput('3')">3</button>
      <button onclick="calcInput('-')">‚àí</button>
      <button onclick="calcInput('0')">0</button>
      <button onclick="calcInput('.')">.</button>
      <button onclick="calculate()">=</button>
      <button onclick="calcInput('+')">+</button>
      <button onclick="clearCalc()" class="clear-button">Rensa</button>
    </div>
  </div>
</div>

<!-- Resterande svarsknappar och inneh√•ll -->
<button onclick="checkAnswer()">Svara</button>
<button id="nextBtn" onclick="skipToNext()">N√§sta fr√•ga</button>
<button id="prevBtn" onclick="goToPrevious()" style="display:none;">F√∂reg√•ende fr√•ga</button>

<div class="feedback" id="feedback"></div>
<div class="explanation" id="explanation"></div>
<canvas id="chart" style="display: none;"></canvas>
<button onclick="goBackToCategory()">Tillbaka</button>

  

  <canvas id="confetti-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999;"></canvas>

</section>

<!-- Testa dig sj√§lv-sektion -->
<section id="selfTestSection" style="display: none;">
  <h2>üß† Testa dig sj√§lv!</h2>
  <p>V√§lj vilka kategorier du vill testa dig p√•:</p>
  <div id="selfTestOptions" class="category-buttons">
    <label><input type="checkbox" value="fraction"> Addition</label>
    <label><input type="checkbox" value="subtraction"> Subtraktion</label>
    <label><input type="checkbox" value="multiplication"> Multiplikation</label>
    <label><input type="checkbox" value="division"> Division</label>
    <label><input type="checkbox" value="compare_order"> J√§mf√∂relse & Ordning</label>
    <label><input type="checkbox" value="equation"> Ekvationer</label>
    <label><input type="checkbox" value="word problem"> Textuppgifter</label>
  </div>
  <button onclick="startSelfTest()">üöÄ Starta test</button>
  <button onclick="startFinalTest()">üèÅ Sluttest (Alla kategorier)</button>
  <button onclick="showIntro()">Tillbaka</button>
</section>

<section id="myResultsSection" style="display: none;">
  <h2>üìä Mina tidigare resultat</h2>
  <div id="myResultsOutput"></div>
  <button onclick="showIntro()">Tillbaka</button>
</section>

  <script>

  let firstTryStats = {}; // { 'fraction': { correct: 2, total: 3 }, ... }
  let selfTestResults = []; 
  let selectedCategory = "";

  
// L√•sa upp fr√•gorna
let questionsToShow = 3;
  let unlockExtraQuestions = false;
  let originalQuestions;    // s√§tts i beginCategoryExercise()
  let filteredQuestions = []; 


  let currentQuestion = 0;               // Vilken fr√•ga √§r vi p√•?
  let attempts = 0;                      // Hur m√•nga f√∂rs√∂k p√• denna fr√•ga?
  let correctFirstTry = 0;               // Antal r√§tt p√• f√∂rsta f√∂rs√∂k
  let totalQuestions = 0;   


  function showCategorySelector() {
  document.getElementById("introSection").style.display = "none";
  document.getElementById("categorySection").style.display = "block";
  document.getElementById("infoSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none"; // ‚úÖ D√ñLJ DENNA
  document.getElementById("introImage").style.display = "none";
  document.getElementById("categorySection").classList.add("fade-in");

  // üîß G√∂m och rensa tidigare resultat
  const chart = document.getElementById("chart");
  const explanation = document.getElementById("explanation");
  if (chart) {
    chart.style.display = "none";
    const chartInstance = Chart.getChart("chart");
    if (chartInstance) chartInstance.destroy();
    chart.getContext("2d").clearRect(0, 0, 400, 400);
  }
  if (explanation) explanation.innerHTML = "";
}

function startCategory(category) {
  hideBubbles();
  document.getElementById("categorySection").style.display = "block";
  selectedCategory = category;

  // D√∂lj alla andra sektioner
  document.getElementById("introSection").style.display = "none";
  document.getElementById("introImage").style.display = "none";
  document.getElementById("infoSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("myResultsSection").style.display = "none";
  document.getElementById("categorySection").style.display = "none";

  // ‚úÖ Visa introsektionen
  document.getElementById("categoryIntroSection").style.display = "block";

  // ‚¨áÔ∏è Fyll i rubrik och exempeltext
  const titleMap = {
    fraction: "‚ûï Addition",
    subtraction: "‚ûñ Subtraktion",
    multiplication: "‚úñÔ∏è Multiplikation",
    division: "‚ûó Division",
    compare_order: "üìä J√§mf√∂relse & Ordning",
    equation: "L√∂sa ekvationer",
    "word problem": "üìò Textuppgifter",
    all: "üìö Alla uppgifter"
  };

  document.getElementById("categoryIntroTitle").innerText = titleMap[category];

if (category === "all") {
  document.getElementById("categoryIntroText").innerHTML = 
    "H√§r f√•r du m√∂jlighet att g√∂ra alla uppgifter f√∂r alla kategorier.";
} else {
  const introText = categoryIntroductions[category] || "Kort introduktion till kategorin.";
  const example = categoryExamples[category] || "H√§r visas ett exempel.";
  document.getElementById("categoryIntroText").innerHTML =
    `<strong>F√∂rklaring:</strong> ${introText}<br><br><strong>Exempel:</strong> ${example}`;
}

formatFractionsInElement("categoryIntroText");

}



    const categoryIntroductions = {
  fraction: "N√§r du adderar br√•k, m√•ste du f√∂rst kontrollera om n√§mnarna √§r lika. Om inte, g√∂r dem lika genom att hitta en gemensam n√§mnare.",
  subtraction: " N√§r du subtraherar br√•k, g√§ller samma sak: gemensam n√§mnare √§r viktigt innan du kan subtrahera t√§ljarna.",
  division: "Vid division av br√•k v√§nder du det andra br√•ket och multiplicerar (kallas invertering).",
  multiplication: "Multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare. Du beh√∂ver inte ha samma n√§mnare.",
  compare_order: "F√∂r att avg√∂ra vilket br√•k som √§r st√∂rst, kan du antingen skriva om b√•da br√•ken med en gemensam n√§mnare eller omvandla dem till decimalform och j√§mf√∂ra.",
  equation: "F√∂r att l√∂sa ekvationer med br√•k, b√∂rja med att f√• ùë•-termen ensam p√• ena sidan av ekvationen. Om det finns termer som √§r adderade, subtraherade, multiplicerade eller dividerade med ùë•, flytta √∂ver dem till andra sidan av ekvationen genom att anv√§nda motsatta operationer (t.ex. subtrahera om det √§r adderat, multiplicera om det √§r dividerat)",
  "word problem": "L√§s noga! F√∂rs√∂k √∂vers√§tta situationen till en br√•kr√§kning!"
  

};

const categoryExamples = { 
  fraction: 
  "Ber√§kna 2/3 + 1/2 <br><br>" + 
  "<strong>L√∂sning:</strong><br>" +
  "<strong>1. Hitta minsta gemensamma n√§mnare (MGN):</strong><br>" +
  "F√∂r att hitta MGN f√∂r 3 och 2, letar vi efter <span style=\"color: red;\">det minsta talet</span> som b√•da n√§mnarna kan delas med. " + 
  "Det minsta talet som b√•de 3 och 2 g√•r att dela in i √§r <span style=\"color: red;\">6</span>.<br><br>" +
  
  "<strong>2. F√∂rl√§ng br√•ken s√• att de f√•r gemensam n√§mnare:</strong><br>" +
  "F√∂r att g√∂ra 2/3 till ett br√•k med n√§mnaren 6, f√∂rl√§nger vi b√•de t√§ljaren och n√§mnaren med " +
  "<span style=\"color: red;\">2</span>:<br><br>" +
  "(2 √ó <span style=\"color: red;\">2</span>)/(3 √ó <span style=\"color: red;\">2</span>) = 4/6<br><br>" +
  
  "F√∂r att g√∂ra 1/2 till ett br√•k med n√§mnaren 6, f√∂rl√§nger vi b√•de t√§ljaren och n√§mnaren med " +
  "<span style=\"color: red;\">3</span>:<br><br>" +
  "(1 √ó <span style=\"color: red;\">3</span>)/(2 √ó <span style=\"color: red;\">3</span>) = 3/6<br><br>" +

  "<strong>3. Adderar de tv√• br√•ken:</strong><br><br>" +
  "4/6 + 3/6 = (4 + 3)/6 = <span style=\"color: green;\">7/6</span>",
  
  subtraction: "5/6 - 1/2 ‚Üí Minsta gemensamma n√§mnare √§r: <span style=\"color: red;\">6</span><br><br>" + 
"<strong>L√∂sning:</strong><br>" +
  "<strong>1. Hitta minsta gemensamma n√§mnare (MGN):</strong><br>" +
  "F√∂r att hitta MGN f√∂r 6 och 2, letar vi efter det minsta talet som b√•da n√§mnarna kan delas med. " + 
  "Det minsta talet som b√•de 6 och 2 g√•r att dela in i √§r <span style=\"color: red;\">6</span>.<br><br>" +

  "<strong>2. F√∂rl√§ng br√•ken s√• att de f√•r gemensam n√§mnare:</strong><br><br>" +
  "F√∂r att g√∂ra 5/6 till ett br√•k med n√§mnaren 6, beh√∂ver vi inte f√∂rl√§nga ‚Äì det √§r redan 6 i n√§mnaren.<br><br>" +

  "F√∂r att g√∂ra 1/2 till ett br√•k med n√§mnaren 6, f√∂rl√§nger vi b√•de t√§ljaren och n√§mnaren med " +
  "<span style=\"color: red;\">3</span>:<br><br>" +
  "(1 √ó <span style=\"color: red;\">3</span>)/(2 √ó <span style=\"color: red;\">3</span>) = 3/6<br><br>" +

  "<span style=\"color: red;\">(f√∂rl√§nga med 3 f√∂r att f√• gemensam n√§mnare)</span><br><br>" +

  "<strong>3. Subtrahera br√•ken:</strong><br><br>" +
  "5/6 - 3/6 = (5 - 3)/6 = 2/6 = <span style=\"color: green;\">1/3</span>",

  multiplication: 
    "2/3 √ó 3/4<br><br>" +
    "<strong>L√∂sning:</strong><br><br>" +
  "<strong>1. Multiplicera t√§ljare och n√§mnare:</strong><br>" +
  "(<span style=\"color: red;\">2</span> √ó <span style=\"color: red;\">3</span>)/(<span style=\"color: red;\">3</span> √ó <span style=\"color: red;\">4</span>) = 6/12<br><br>" +
  "<strong>2. F√∂rkorta br√•ket genom att dividera b√•de t√§ljare och n√§mnare med <span style=\"color: red;\">6</span>:</strong><br>" +
  "(6√∑ <span style=\"color: red;\">6</span>)/(12 √∑ <span style=\"color: red;\">6</span>) = 1/2<br><br>" +
  "Allts√•: 6/12 = <span style=\"color: green;\">1/2</span>",

  division: 
    "1/2 √∑ 1/4<br><br>" +
    "<strong>L√∂sning:</strong><br><br>" +
    "<strong>1. Byt till multiplikation med det omv√§nda <span style=\"color: red;\">(invertering)</span> :</strong><br>" +
    "1/2 √ó <span style=\"color: red;\">4/1</span> <br><br>" +
    "<strong>2. Multiplicera t√§ljare och n√§mnare:</strong><br>" +
    "(<span style=\"color: red;\">1</span> √ó <span style=\"color: red;\">4</span>)/(<span style=\"color: red;\">2</span> √ó <span style=\"color: red;\">1</span>) = 4/2<br><br>" +
    "<strong>3. F√∂renkla:</strong><br>" +
    "4/2 = <span style=\"color: green;\">2</span>",

  compare_order: 
  "<strong>Vilket √§r st√∂rst: 1/3 eller 1/2?</strong><br><br>" +
  "<strong>L√∂sning:</strong><br>" +
    "<strong>1.Hitta minsta gemensamma n√§mnare (MGN):</strong><br>" +
    "F√∂r 3 och 2 √§r MGN <span style=\"color: red;\">6</span><br><br>" +
    "<strong>2. F√∂rl√§ng br√•ken:</strong><br>" +
    "1/3 ‚Üí (1 √ó <span style=\"color: red;\">2</span>)/(3 √ó <span style=\"color: red;\">2</span>) = 2/6<br>" +
    "1/2 ‚Üí (1 √ó <span style=\"color: red;\">3</span>)/(2 √ó <span style=\"color: red;\">3</span>) = 3/6<br><br>" +
    "<strong>3. J√§mf√∂r t√§ljarna:</strong><br>" +
    "2/6 < 3/6 ‚Üí <span style=\"color: green;\">1/3 < 1/2</span><br><br>" +
    "<strong>Visualisering:</strong><br>" +
    "<figure>" +
    "  <img src=\"brak22.png\" " +
    " <figcaption><em>Man kan ocks√• t√§nka p√• detta som att j√§mf√∂ra pizzabitar: 1/2 av en pizza √§r st√∂rre √§n 1/3.</em></figcaption>"+
    "</figure><br><br>"+

    "<strong>Exempel 2. Ordna br√•k i storleksordning: 1/3, 1/2, 2/3, 3/4</strong><br><br>" +
    "<strong>L√∂sning:</strong><br>" +
    "<strong>Steg 1: Hitta minsta gemensamma n√§mnare (MGN) f√∂r alla br√•k:</strong><br>" +
    "MGN = <span style=\"color: red;\">12</span><br><br>" +
    "<strong>Steg 2: F√∂rl√§ng br√•ken till samma n√§mnare:><br><br><br>" +
    "1/3 ‚Üí (1 √ó <span style=\"color: red;\">4</span>)/(3 √ó <span style=\"color: red;\">4</span>) = 4/12<br>1/3 ‚Üí (1 √ó <span style=\"color: red;\">4</span>)/(3 √ó <span style=\"color: red;\">4</span>) = 4/12<br><br>" +
    "1/2 ‚Üí (1 √ó <span style=\"color: red;\">6</span>)/(2 √ó <span style=\"color: red;\">6</span>) = 6/12<br><br>" +
    "2/3 ‚Üí (2 √ó <span style=\"color: red;\">4</span>)/(3 √ó <span style=\"color: red;\">4</span>) = 8/12<br><br>" +
    "3/4 ‚Üí (3 √ó <span style=\"color: red;\">3</span>)/(4 √ó <span style=\"color: red;\">3</span>) = 9/12<br><br>" +
    "<strong>Steg 3. J√§mf√∂r t√§ljarna:</strong><br>" +
    "4/12 (1/3) < 6/12 (1/2) < 8/12 (2/3) < 9/12 (3/4)<br><br>" +
    "D√§rmed f√•r vi ordningen: <span style=\"color: green;\">1/3 , 1/2 , 2/3, 3/4 </span><br><br>" +
    "<strong>Visualisering:</strong><br>" +
    "<figure>" +
    "  <img src=\"brak11.png\" " +
    "  <figcaption><em>Man kan ocks√• t√§nka p√• detta som att j√§mf√∂ra pizzabitar</em></figcaption>" +
    "</figure><br><br>",



  equation: 
  `Ber√§kna: x + 1/3 = 1<br>
x = 1 - <span style="color: red;">1/3</span><br><br>
<span style="color: red;">(subtrahera med 1/3 f√∂r att x ska st√• ensam)</span><br><br>
x = (1 √ó <span style="color: red;">3</span>)/(1 √ó <span style="color: red;">3</span>) - 1/3<br><span style="color: red;">(multiplicera med 3 f√∂r att ha gemensamma n√§mnare)</span><br><br>
x = 3/3 - 1/3<br><br>
x = (3 - 1)/3<br><br>
x = 2/3`,
  "word problem": "I en stad finns 52 000 inv√•nare. Av dessa √§r 4/7 barn och av √∂vriga inv√•narne √§r tv√• tredjedelar m√§n. Hur m√•nga kvinnor bor i staden?<br><br>" +
  " <strong>L√∂sning:</strong><br>" +
  "Tolka uppgiften: Det finns  52 000 inv√•nare och 4/7 √§r barn. Allts√•: 3/7 av inv√•narna √§r vuxna.<br><br>" +
  "Av dessa √§r 2/3 m√§n, vilket ger att 1/3 av 3/7 √§r kvinnor, vilket √§r: <br><br>" +
  "1/3 √ó 3/7 = 3/21 = 1/7 av inv√•narna."+
  "Ber√§kna antalet kvinnor: 52 000 √ó 1/7 ‚âà 7 430 inv√•nare<br>",
};


    const questions = [

    {
  category: "fraction",
  question: "Ber√§kna 1/3 + 1/2 och svara i br√•kform.",
  answer: "5/6",
  tips: [
    "N√§r du adderar br√•k med olika n√§mnare m√•ste du f√∂rst hitta en gemensam n√§mnare.",
    "Vilket √§r minsta gemensamma n√§mnare f√∂r 3 och 2?"
  ],
  specificTips: {
    "2/5": "Kom ih√•g att du inte kan addera n√§mnarna direkt.<br>" +
           "F√∂rs√∂k hitta en gemensam n√§mnare f√∂rst och g√∂r om b√•da br√•ken.",

    "1/5": "Det verkar som att du trodde att om t√§ljarna √§r 1, kan man addera n√§mnarna direkt.<br>" +
       "<span style='color: red;'>MEN</span> √§ven om t√§ljarna √§r 1 m√•ste du alltid hitta en <span style='color: red;'>gemensam n√§mnare</span> innan du kan addera br√•ken.<br>"  +
       "N√§r du har hittat gemensam n√§mnare, <span style='color: red;'>adderar du t√§ljarna och beh√•ller samma n√§mnare</span>.<br>" +
       "Vilken √§r minsta gemensamma n√§mnare f√∂r 3 och 2? F√∂rs√∂k igen!",

    "2/6": "Det verkar som om du har f√∂rs√∂kt hitta en gemensam n√§mnare, bra!<br>" +
           "Men kolla t√§ljarna noggrant, adderade du dem r√§tt?",

    "1/6": "Det verkar som att du blandat ihop reglerna. Du kan inte bara ta 3 √ó 2 och beh√•lla 1 n√§r du adderar br√•k.<br>"+
"F√∂r att addera br√•k m√•ste du hitta <span style='color: red;'>minsta gemensam n√§mnare</span> f√∂r 3 och 2.<br>"+
"N√§r du har den gemensamma n√§mnaren kan du f√∂rl√§nga b√•de t√§ljare och n√§mnare f√∂r <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> och <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span>s√• att de f√•r samma n√§mnare.<br>"+
"Sedan adderar du t√§ljarna och beh√•ller samma n√§mnare.<br>",

    "5/12": "Dubbelkolla vilken gemensam n√§mnare du anv√§nder.<br>" +
            "√Ñr 12 verkligen det minsta gemensamma talet f√∂r 3 och 2?",

    "10/12": "Dubbelkolla vilken gemensam n√§mnare du anv√§nder.<br>" +
            "√Ñr 12 verkligen det minsta gemensamma talet f√∂r 3 och 2? F√∂rs√∂k igen!",

    "2/3": "Det verkar som att du kanske har adderat n√§mnarna ocks√•.<br>" +
           "T√§nk p√• att bara addera t√§ljarna efter att br√•ken har samma n√§mnare."
  },
  explanation: "L√∂sning:<br><br>" +
               "F√∂r att addera 1/3 och 1/2 m√•ste vi f√∂rst hitta en gemensam n√§mnare.<br>" +
               "Minsta gemensamma n√§mnare f√∂r 3 och 2 √§r 6.<br><br>" +
               "Vi skriver om br√•ken:<br>" +
               "1/3 = 2/6 (multiplicera b√•de t√§ljare och n√§mnare med 2)<br>" +
               "1/2 = 3/6 (multiplicera b√•de t√§ljare och n√§mnare med 3)<br><br>" +
               "Nu kan vi addera:<br>" +
               "2/6 + 3/6 = 5/6.<br><br>" +
               "Svaret √§r 5/6."
      },

     
      {
        category: "fraction",
        question: "Ber√§kna 2/3 + 1/2 och svara i br√•kform",
        answer: "7/6",
        tips: [
          "Hitta gemensamma n√§mnare f√∂r 3 och 2."
        ],
        specificTips: {
          "3/5": "OBS! T√§nk p√• hur du adderar br√•k!<br>" +
           "N√§r du adderar br√•k m√•ste du f√∂rst hitta en <span style='color: red;'>gemensam n√§mnare</span>. Du kan inte addera t√§ljarna (de √∂vre talen) och n√§mnarna (de nedre talen) direkt.<br>" +
           "Vad √§r en gemensam n√§mnare f√∂r 3 och 2?<br>" +
           "Omvandla sedan b√•da br√•ken s√• att de har samma n√§mnare och addera bara t√§ljarna, inte n√§mnarna.",
           
          "3/6":  "Kolla noga, det √§r addition, inte multiplikation.<br>" +
        "T√§nk p√• att f√∂r att addera br√•k beh√∂ver de ha samma n√§mnare.<br>" +
        "Vad skulle h√§nda om du g√∂r om b√•de <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> och <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> till br√•k med samma n√§mnare innan du l√§gger ihop dem?",

"1/2":  "Kolla noga, det √§r addition, inte multiplikation.<br>" +
        "T√§nk p√• att f√∂r att addera br√•k beh√∂ver de ha samma n√§mnare.<br>" +
        "Vad skulle h√§nda om du g√∂r om b√•de <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> och <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> till br√•k med samma n√§mnare innan du l√§gger ihop dem?",

  },
          
  
        explanation:[
        "L√∂sning: <br>"+
        "F√∂r att kunna addera, m√•ste br√•ken ha samma n√§mnare.<br>"+
        "Vi hittar en gemensam n√§mnare f√∂r 3 och 2. Det minsta gemensamma talet √§r 6.<br>"+
        "Nu skriver vi om br√•ken s√• att b√•da har n√§mnaren 6.<br>"+
        "2/3 = 4/6 (vi multiplicerar b√•de t√§ljaren och n√§mnaren med 2).<br><br>"+
        "1/2 = 3/6 (vi multiplicerar b√•de t√§ljaren och n√§mnaren med 3).<br><br>"+
        "Nu kan vi addera: 4/6 + 3/6 = 7/6.<br><br>"
    
  ]
  
      },

      { category: "fraction",
        question: "Ber√§kna 3 + 2/7 och svara i br√•kform.",
        answer: "23/7",
        tips: [
          "Vad h√§nder om du g√∂r om 3 till sjundedelar?",
          "T√§nk p√• att 3 √§r samma sak som 21/7. Vad f√•r du om du adderar?."
        ],
        specificTips: {
          "5/7": "Kom ih√•g att 3 √§r <span style='color: red;'>ett heltal</span> och f√∂r att kunna addera det med ett br√•k som <span class='fraction'><span class='top'>2</span><span class='bottom'>7</span></span> m√•ste du f√∂rst skriva om 3 som ett br√•k.<br>" +
         "F√∂r att g√∂ra detta, kan du skriva 3 som t.ex. <span class='fraction'><span class='top'>3</span><span class='bottom'>1</span></span><br>" +
         "T√§nk sedan p√• vilken gemensam n√§mnare du kan anv√§nda f√∂r <span class='fraction'><span class='top'>3</span><span class='bottom'>1</span></span> och  <span class='fraction'><span class='top'>2</span><span class='bottom'>7</span></span>. N√§r du har samma n√§mnare, kan du addera t√§ljarna.",


           "5/10": "Kom ih√•g att du inte kan addera 3 med 2 och 3 med 7 direkt. N√§r du har ett heltal som 3, kan du skriva om det som ett br√•k.<br>" +
            "F√∂r att kunna addera dessa br√•k m√•ste du hitta den minsta gemensamma n√§mnaren.<br>" +
            "Steg 1: F√∂rs√∂k att skriva om 3 som ett br√•k, t.ex. <span class='fraction'><span class='top'>3</span><span class='bottom'>1</span></span>, och t√§nk p√• vilken gemensam n√§mnare du kan anv√§nda med 2/7.<br>" +
            "Steg 2: Vad √§r den minsta gemensamma n√§mnaren f√∂r 1 och 7? Vad kan du multiplicera b√•de t√§ljare och n√§mnare med f√∂r att f√• samma n√§mnare?",
    
    "2/7": "Du verkar ha blandat ihop addition och multiplikation.<br>" + 
           "N√§r du ser 3 + 2/7, t√§nk p√• att 3 √§r ett heltal och beh√∂ver omvandlas till ett br√•k.<br>" +
           "Skriv om 3 som ett br√•k med n√§mnaren 7 och l√§gg sedan ihop t√§ljarna.",
    
    "6/7": "Kom ih√•g att du inte ska multiplicera 3 med 2.<br>" + 
         "Ist√§llet ska du omvandla 3 till ett br√•k, t.ex. <span class='fraction'><span class='top'>3</span><span class='bottom'>1</span></span>, och sedan hitta en gemensam n√§mnare med 2/7.<br>" +
         "N√§r du har samma n√§mnare, kan du addera t√§ljarna. F√∂rs√∂k att hitta r√§tt gemensam n√§mnare och addera t√§ljarna korrekt!",
    
    "6/21": "Kom ih√•g att du inte ska multiplicera 3 med <span class='fraction'><span class='top'>2</span><span class='bottom'>7</span></span>.<br>" +
            "Ist√§llet ska du omvandla 3 till ett br√•k, t.ex. <span class='fraction'><span class='top'>3</span><span class='bottom'>1</span></span>, och sedan hitta en gemensam n√§mnare med 2/7.<br>" +
         "N√§r du har samma n√§mnare, kan du addera t√§ljarna. F√∂rs√∂k att hitta r√§tt gemensam n√§mnare och addera t√§ljarna korrekt!",
  },
    
  explanation: [
  "L√∂sning: <br>" +
  "F√∂r att addera 3 och 2/7, m√•ste vi f√∂rst skriva om 3 som ett br√•k.<br>" +
  "Eftersom 3 √§r ett heltal kan vi skriva det som 3/1.<br>" +
  "Nu m√•ste vi hitta en gemensam n√§mnare mellan 3/1 och 2/7. Den minsta gemensamma n√§mnaren √§r 7.<br>" +
  "F√∂r att f√• samma n√§mnare som 2/7, multiplicerar vi b√•de t√§ljaren och n√§mnaren i 3/1 med 7. D√• f√•r vi 21/7.<br>" +
  "Nu ser vi att vi har 21/7 och 2/7, s√• vi kan addera t√§ljarna: 21 + 2 = 23.<br>" +
  "Slutligen f√•r vi resultatet 23/7.<br>"
]

      },
      
      { category: "fraction",
        question: "Ber√§kna 1/7 + 1 och svara i br√•kform.",
        answer: "8/7",
        tips: [
          "Vad h√§nder om du g√∂r om 1 till sjundedelar? F√∂rs√∂k igen.",
          "T√§nk p√• att 1 √§r samma sak som 7/7. F√∂rs√∂k igen!."
        ],
        specificTips: {
          "2/7": "Kom ih√•g att du inte kan addera 1 + 1 direkt n√§r du jobbar med br√•k.<br>"+
          "Du m√•ste f√∂rst skriva om 1 som ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>1</span><span class='bottom'>7</span></span>. F√∂rs√∂k att skriva 1 som <span class='fraction'><span class='top'>7</span><span class='bottom'>7</span></span> och addera sedan t√§ljarna.",
          "2/8": "Hur kan vi skriva heltalet 1 som ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>1</span><span class='bottom'>7</span></span>?. F√∂rs√∂k igen!",
          "1/4": "Hur kan vi skriva heltalet 1 som ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>1</span><span class='bottom'>7</span></span>?. F√∂rs√∂k igen!",
          "1/8": "Kom ih√•g att du inte kan addera 7 med 1 direkt, eftersom 7 √§r n√§mnaren f√∂r det ena br√•ket och 1 √§r ett heltal.<br>"+ 
          "Skriv om 1 som ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>1</span><span class='bottom'>7</span></span> innan du kan addera t√§ljarna. F√∂rs√∂k igen!",
          
        },
        explanation: [
        "L√∂sning: <br>"+
        "1/7 + 1 = 1/7 + 7/7 = 8/7 <br>"+
        "Du g√∂r om 1 till sjundedelar (1 = 7/7) och adderar t√§ljarna."
        ]

      },
      
      
      { category: "fraction",
        question: "Ber√§kna 1/4 + 1/3 och svara i br√•kform.",
        answer: "7/12",
        tips: [
          "Vad h√§nder om du g√∂r samma n√§mnare f√∂rst?. F√∂rs√∂k igen!",
          "Hitta gemensam n√§mnare f√∂r 4 och 3. F√∂rs√∂k igen!"
        ],
        specificTips: {
          "1/7": "Kom ih√•g att n√§mnarna inte adderas. F√∂rs√∂k igen.",
          "2/12":"Du har adderat t√§ljarna och multiplicerat n√§mnarna, men vid addition av br√•k beh√∂ver du en gemensam n√§mnare. F√∂rs√∂k igen!",
          "2/7": "Kom ih√•g att vi inte kan l√§gga ihop br√•k med olika n√§mnare direkt. Vi m√•ste f√∂rst hitta en gemensam n√§mnare f√∂r 4 och 3 . F√∂rs√∂k igen!",
          "1/12":"Kom ih√•g att n√§r du adderar br√•k, ska du inte multiplicera n√§mnarna direkt och beh√•lla 1 som en konstant. F√∂r att addera 1/4 och 1/3 m√•ste du hitta en gemensam n√§mnare. Om du har hittat den gemensamma n√§mnaren som √§r 12, √§r det j√§ttebra! Men nu m√•ste du komma ih√•g att t√§ljarna ska adderas, inte multipliceras. F√∂rs√∂k nu att addera t√§ljarna p√• r√§tt s√§tt."
        
        },
        explanation: [
        "L√∂sning: <br>"+
        "1/4 + 1/3 ‚Üí Gemensam n√§mnare √§r = 12 <br>"+
        "1/4 = 3/12 (multiplicera b√•de t√§ljaren och n√§mnaren med 3)<br><br>"+
        "1/3 = 4/12 (multiplicera b√•de t√§ljaren och n√§mnaren med 4)<br>"+
        "Nu kan vi addera: 3/12 + 4/12 = (3 + 4)/12 = 7/12<br><br>"
        ]
      },

      {
        category: "fraction",
        question: "Ber√§kna 1/2 +  1/2 och svara i enklaste form",
        answer: "1",
        tips: ["N√§r du adderar br√•ktal med samma n√§mnare, beh√•ller du n√§mnaren och adderar t√§ljarna.",
          
          "Vad f√•r du om du adderar t√§ljarna och beh√•ller samma n√§mnare?"
        ],
        specificTips: {
          "1/8": "Kom ih√•g att n√§mnarna inte adderas. Vad g√∂r du med t√§ljarna? F√∂rs√∂k igen.",
          "2/2": "Bra jobbat! F√∂rs√∂k att f√∂rkorta br√•ket f√∂r att f√• det i enklaste form.",
          "1/4": "Kom ih√•g att n√§mnarna inte adderas n√§r du adderar br√•k. T√§nk p√• att t√§ljarna adderas, men n√§mnarna f√∂rblir samma. Vad f√•r du om du adderar t√§ljarna och beh√•ller samma n√§mnare?",
          "2/4": "T√§nk p√• att bara addera t√§ljarna n√§r br√•ken har samma n√§mnare.",
          "1/3": "Kom ih√•g att n√§mnarna inte adderas. Vad g√∂r du med t√§ljarna? F√∂rs√∂k igen.",
          "1/5": "Kom ih√•g att n√§mnarna inte adderas. Vad g√∂r du med t√§ljarna? F√∂rs√∂k igen.",
        },
        explanation: "L√∂sning: <br><br>"+ "1/2 + 1/2 = (1+1)/2= 2/2 = 1.<br><br>"+
        "Du adderar t√§ljarna (1+1=2) och beh√•ller n√§mnaren (2)."
      },



     ///////////////Subtraction
      {
        category: "subtraction",
        question: "Ber√§kna 2/5 - 1/5 och svara i br√•kform.",
        answer: " 1/5",
        tips: ["N√§r du subtraherar br√•ktal med samma n√§mnare, beh√•ller du n√§mnaren och subtraherar t√§ljarna.",
            
            "Vi har redan samma n√§mnare, s√• det √§r bara t√§ljarna som ska subtraheras.",
        ],
        specificTips: {
          "1/0": "Kom ih√•g att vi inte kan subtrahera n√§mnarna. H√§r har vi redan samma n√§mnare, s√• det √§r bara t√§ljarna som ska subtraheras. F√∂rs√∂k igen!",
          
        },
        explanation: [
        "L√∂sning: <br>"+
        "2/5 - 1/5 = 1/5. Eftersom n√§mnarna √§r lika, subtraherar vi bara t√§ljarna."
        ]
      },
      
      {
        category: "subtraction",
  question: "Ber√§kna 7/6 - 1/3 och svara i br√•kform",
  answer: "5/6",
  tips: [
    "Hitta gemensamma n√§mnare f√∂r 6 och 3."
  ],
  specificTips: {

    "6/3": "Du har subtraherat br√•ken p√• fel s√§tt. Kom ih√•g att du <span style='color: red;'>inte</span> kan subtrahera t√§ljarna direkt utan att ha samma n√§mnare.<br>" +
        "Vid addition och subtraktion av br√•k <span style='color: red;'>beh√•ller du alltid samma n√§mnare</span>.<br>" +
        "Steg 1: Hitta en gemensam n√§mnare f√∂r br√•ken innan du subtraherar.<br>" +
        "Vad √§r den gemensamma n√§mnaren f√∂r 6 och 3?<br>" +
        "Steg 2: Omvandla <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> till ett br√•k med samma n√§mnare som  <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span> och subtrahera sedan t√§ljarna.<br>" +
        "Kom ih√•g att beh√•lla samma n√§mnare. F√∂rs√∂k igen!",

     "2": "Du har subtraherat br√•ken p√• fel s√§tt. Kom ih√•g att du <span style='color: red;'>inte</span> kan subtrahera t√§ljarna direkt utan att ha samma n√§mnare.<br>" +
        "Vid addition och subtraktion av br√•k beh√•ller du alltid samma n√§mnare.<br>" +
        "Steg 1: Hitta en gemensam n√§mnare f√∂r br√•ken innan du subtraherar.<br>" +
        "Vad √§r den gemensamma n√§mnaren f√∂r 6 och 3?<br>" +
        "Steg 2: Omvandla <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> till ett br√•k med samma n√§mnare som  <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span> och subtrahera sedan t√§ljarna.<br>" +
        "Kom ih√•g att beh√•lla samma n√§mnare. F√∂rs√∂k igen!",

    "6/6": "Det verkar som att du har missat att <span style='color: red;'>multiplicera b√•de t√§ljaren och n√§mnaren</span> f√∂r <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> f√∂r att f√• samma n√§mnare som <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span>.<br>" +
        "N√§r du ska subtrahera br√•k, m√•ste br√•ken ha samma n√§mnare.<br>" +
        "F√∂r att omvandla <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> till ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span>, m√•ste du multiplicera b√•de t√§ljaren och n√§mnaren av <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> med 2, s√• att du f√•r <span class='fraction'><span class='top'>2</span><span class='bottom'>6</span></span>.<br>" +
        "Steg 1: Skriv om <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> <br>" +
        "Steg 2: Subtrahera sedan t√§ljarna och beh√•ll samma n√§mnare (6).<br>" +
        "F√∂rs√∂k igen!",  

    "1": "Det verkar som att du har missat att <span style='color: red;'>multiplicera b√•de t√§ljaren och n√§mnaren</span> f√∂r <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> f√∂r att f√• samma n√§mnare som <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span>.<br>" +
        "N√§r du ska subtrahera br√•k, m√•ste br√•ken ha samma n√§mnare.<br>" +
        "F√∂r att omvandla <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> till ett br√•k med samma n√§mnare som <span class='fraction'><span class='top'>7</span><span class='bottom'>6</span></span>, m√•ste du multiplicera b√•de t√§ljaren och n√§mnaren av <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> med 2, s√• att du f√•r <span class='fraction'><span class='top'>2</span><span class='bottom'>6</span></span>.<br>" +
        "Steg 1: Skriv om <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> <br>" +
        "Steg 2: Subtrahera sedan t√§ljarna och beh√•ll samma n√§mnare (6).<br>" +
        "F√∂rs√∂k igen!",  


    "3/6": "Kom ih√•g att n√§r du subtraherar br√•k m√•ste de ha samma n√§mnare.<br>" +
           "F√∂rs√∂k att hitta den minsta gemensamma n√§mnaren f√∂r 6 och 3.<br>" +
           "Omvandla sedan b√•da br√•ken s√• att de har samma n√§mnare och subtrahera t√§ljarna.",

    "2/6": "Kolla noga! T√§nk p√• att du ska omvandla 1/3 till ett br√•k med n√§mnaren 6 och sedan subtrahera t√§ljarna.<br>" +
           "F√∂rs√∂k att hitta r√§tt gemensam n√§mnare och subtrahera korrekt!",

    "7/3": "T√§nk p√• att 7/6 och 1/3 inte har samma n√§mnare √§n s√• l√§nge. F√∂rs√∂k att skriva om 1/3 som ett br√•k med n√§mnaren 6.<br>" +
           "F√∂rs√∂k att hitta r√§tt gemensam n√§mnare och subtrahera t√§ljarna korrekt!"
  },

  explanation: [
    "L√∂sning: <br>" +
    "F√∂r att subtrahera, m√•ste br√•ken ha samma n√§mnare.<br>" +
    "Vi hittar en gemensam n√§mnare f√∂r 6 och 3. Det minsta gemensamma talet √§r 6.<br>" +
    "Nu skriver vi om br√•ken s√• att b√•da har n√§mnaren 6.<br>" +
    "7/6 = 7/6 (det √§r redan r√§tt, s√• det beh√∂vs ingen √§ndring).<br>" +
    "1/3 = 2/6 (vi multiplicerar b√•de t√§ljaren och n√§mnaren med 2).<br><br>" +
    "Nu kan vi subtrahera: 7/6 - 2/6 = 5/6.<br><br>"

        ]
      },

    
      {
        category: "subtraction",
        question: "Ber√§kna 2 - 1/3 och svara i br√•kform.",
        answer: "5/3",
        tips: ["Se till att br√•ken har samma n√§mnare innan du subtraherar!",
            
          "Vad h√§nder om du g√∂r om 2 till tredelar?",
          "T√§nk p√• att 2 √§r samma sak som 6/3. F√∂rs√∂k igen!"
        ],
        specificTips: {
          "1/3": "Det verkar som att du subtraherat t√§ljarna direkt och beh√•llit n√§mnaren, allts√• <span class='fraction'><span class='top'>(2-1)</span><span class='bottom'>3</span></span>.<br>" +
       "T√§nk p√• att 2 m√•ste skrivas om som ett br√•k innan du kan subtrahera.<br>" +
       "Skriv om 2 som ett br√•k med n√§mnaren 3 f√∂rst, s√• att b√•da br√•ken har samma n√§mnare.<br>",

       "2/6":  "Det verkar som att du multiplicerat 2 med 1/3 ist√§llet f√∂r att subtrahera.<br>" +
       "T√§nk p√• att det st√•r minus (-) inte g√•nger (√ó)<br>" +
       "F√∂r att subtrahera ett heltal och ett br√•k m√•ste du f√∂rst skriva om heltalet som <span style='color: red;'>ett br√•k med samma n√§mnare</span>.<br>" +
       "Hur kan du skriva om 2 s√• att det f√•r n√§mnaren 3?",


        },
        explanation: [
          "L√∂sning: <br><br>" +
  "F√∂r att subtrahera ett heltal och ett br√•k m√•ste vi f√∂rst skriva om heltalet som ett br√•k.<br><br>" +
  "Steg 1: Skriv om 2 som ett br√•k med n√§mnare 3:<br>" +
  "2 = 6/3 (vi multiplicerar b√•de t√§ljare och n√§mnare: 2 √ó 3 = 6)<br><br>" +
  "Steg 2: Nu subtraherar vi br√•ken:<br>" +
  "6/3 - 1/3 = (6 - 1)/3 = 5/3<br><br>" +
  "Svar: 5/3"
        ]
      },



      {
        category: "subtraction",
        question: "Ber√§kna 16/7 - 2 och svara i br√•kform.",
        answer: "2/7",
        tips: [
          "Vad h√§nder om du g√∂r om 2 till sjundedelar?",
          "T√§nk p√• att 2 kan skrivas som ett br√•k med n√§mnaren 7, t.ex. 2 = 14/7.",
          "G√∂r b√•da till br√•k med samma n√§mnare innan du r√§knar."
        ],
        specificTips: {
          "14/7": "N√§r du subtraherar br√•k m√•ste de ha samma n√§mnare! F√∂rs√∂k igen!",
         },
         explanation:     "L√∂sning: <br><br>" +
    "F√∂r att subtrahera 16/7 - 2, m√•ste vi f√∂rst skriva om 2 som ett br√•k med n√§mnaren 7:<br>" +
    "2 = 14/7.<br><br>" +
    "Steg 1: Skriv om uttrycket:<br>" +
    "16/7 - 14/7.<br><br>" +
    "Steg 2: Subtrahera t√§ljarna:<br>" +
    "(16 - 14) / 7 = 2/7.<br><br>" +
    "Svar: 2/7"
      },

      {
        category: "subtraction",
        question: "Ber√§kna 3/6 - 1/3 och svara i br√•kform.",
        answer: "1/6",
        tips: ["Se till att br√•ken har samma n√§mnare innan du subtraherar!",
          "Vad h√§nder om du g√∂r om 1/3 till sj√§ttedelar?",
          "T√§nk p√• att 1/3 √§r samma sak som 2/6. F√∂rs√∂k igen!"
        ],
        specificTips: {
         "2/6": "Det verkar som om du har f√∂rl√§ngt <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> korrekt till <span class='fraction'><span class='top'>2</span><span class='bottom'>6</span></span>, men gl√∂mt att utf√∂ra sj√§lva subtraktionen.<br>" +
           "Kom ih√•g: <span class='fraction'><span class='top'>3</span><span class='bottom'>6</span></span> - <span class='fraction'><span class='top'>2</span><span class='bottom'>6</span></span>= <span class='fraction'><span class='top'>1</span><span class='bottom'>6</span></span><br>" +
           "Subtrahera t√§ljarna och beh√•ll n√§mnaren!",
    "2/3": "Det ser ut som att du f√∂rs√∂kte subtrahera utan att f√∂rst hitta en gemensam n√§mnare.<br>" +
           "F√∂r att subtrahera br√•k m√•ste de ha samma n√§mnare.<br>" +
           "G√∂r om <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> till <span class='fraction'><span class='top'>2</span><span class='bottom'>6</span></span> och subtrahera t√§ljarna.<br>" +
           "F√∂rs√∂k igen!",
        },
        explanation: [
        "L√∂sning: <br><br>" +
    "Steg 1: Hitta en gemensam n√§mnare.<br>" +
    "Vi g√∂r om 1/3 till ett br√•k med n√§mnaren 6:<br>" +
    "1/3 = 2/6.<br><br>" +
    "Steg 2: Subtrahera br√•ken:<br>" +
    "3/6 - 2/6 = (3 - 2)/6 = 1/6.<br><br>" +
    "Svar: 1/6."
        ]
      },

      {
        category: "subtraction",
        question: "Ber√§kna 2/4 - 1/2" ,
        answer: "0",
        tips: ["Har br√•ken samma n√§mnare? Om inte, b√∂rja d√§r!"],
        specificTips: {
          "1/2": "N√§r du subtraherar br√•k m√•ste de ha samma n√§mnare! F√∂rs√∂k igen!",
          "1/4": "N√§r man g√∂r om ett br√•k till samma n√§mnare, m√•ste man multiplicera b√•de t√§ljaren och n√§mnaren med samma tal. F√∂rs√∂k igen."
        },
        explanation: [
        "L√∂sning: <br>"+
        "2/4 = 1/2, s√• 1/2 - 1/2 = 0."

        ]
      },


      // Division
      {
        category: "division",
        question: "Ber√§kna 1/11 √∑ 1/3 och svara i br√•kform.",
        answer: "3/11",
        tips: [
          "N√§r du dividerar med ett br√•k, ska du v√§nda p√• det andra br√•ket och multiplicera!",
          "Hur m√•nga tredjedelar f√•r plats i en elftedel?"
        ],
        specificTips: {
          "1/33": "Du har multiplicerat de tv√• br√•ken direkt ist√§llet f√∂r att dividera.<br>"+ 
          "F√∂rs√∂k att invertera det andra br√•ket (1/3) och multiplicera ist√§llet. Allts√•, 1/11 x 3/1. T√§nk p√• att division av br√•k inneb√§r att du <span style='color: red;'>byter plats p√• det andra br√•ket</span> och multiplicerar ist√§llet.",
    "33": "V√§nd bara p√• det andra br√•ket, inte b√•da! T√§nk p√• att divisionen inneb√§r att du ska multiplicera med det inverterade br√•ket.",
    "14/33": "Kom ih√•g att division av br√•k inte √§r samma sak som addition! Se till att du inverterar det andra br√•ket och multiplicera."

        },
        explanation:  [
        "L√∂sning: <br>" +  
    "1/11 √∑ 1/3 = 1/11 * 3/1 = (1*3)/(11*1) = 3/11 <br>" +
    "N√§r du dividerar br√•k, v√§nder du p√• det andra br√•ket och multiplicerar t√§ljare med t√§ljare samt n√§mnare med n√§mnare."
  
        ]

      },
      {
        category: "division",
        question: "Ber√§kna  1 2/3 √∑ 1/5 och svara i br√•kform.",
        answer: "25/3",
        tips: [
          "F√∂rs√∂k att omvandla 1 <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> till ett br√•k innan du g√∂r divisionen.",
    "Vad h√§nder om du skriver om 1 <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> som <span class='fraction'><span class='top'>5</span><span class='bottom'>3</span></span>?",
          "Kom ih√•g att v√§nda p√• det andra br√•ket n√§r du dividerar.",
          "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det inverterade andra br√•ket."
        ],
        specificTips: {
          "5/3": "Bra jobbat! Du har omvandlat 1<span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> till ett br√•k. Nu kan du forts√§tta med divisionen.",
   "5/15": "Kom ih√•g att n√§r du dividerar br√•k, ska du inte dividera direkt.<br>"+
   "T√§nk ist√§llet p√• att du ska multiplicera med det <span style='color: red;'>omv√§nda (inverterade) av det andra</span> br√•ket. F√∂rs√∂k att invertera det andra br√•ket och multiplicera ist√§llet.",
   "15/5": "Det verkar som att du har inverterat b√•da br√•ken. Kom ih√•g att n√§r du dividerar br√•k, ska du endast <span style='color: red;'>invertera det andra br√•ket</span>(det br√•k du delar med).<br>"+
   "F√∂rs√∂k igen och t√§nk p√• att multiplicera med det inverterade andra br√•ket!",

        },
        explanation:   "L√∂sning: <br><br>" +
    "Steg 1: Omvandla 1 2/3 till ett br√•k: 1 2/3 = 5/3.<br><br>" +
  "Multiplicera heltalet 1 med n√§mnaren av br√•ket 3:      1 * 3 = 3<br>" +
  "L√§gg till t√§ljaren av br√•ket 2 till resultatet fr√•n steg 1:     3 + 2 = 5.<br>" +
  "S√§tt resultatet 5 som t√§ljare och beh√•ll samma n√§mnare 3:      5/3<br><br>" +
  "Nu har du omvandlat 1 2/3 till 5/3.<br><br>" +
  "Steg 2: Nu dividerar du br√•ken: 5/3 √∑ 1/5 <br>" +
  "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det omv√§nda av det andra br√•ket (invertera 1/5 till 5/1)<br>" +
  "S√•: 5/3 * <span style='color: red;'>5/1</span> = 25/3<br><br>" +
  "Svar: 25/3."
},

      {
        category: "division",
        question: "Vad √§r 11/0?",
        answer: ["inte definierat", "undefined", "ej definierat", "det g√•r inte att dela", "g√•r ej", "g√•r inte", "kan ej delas"],
        tips: [
          "S√§g att du har 11 kronor och vill dela dessa med 0 personer. Hur mycket f√•r varje person?",
      
          "F√∂rs√∂k att t√§nka p√• multiplicering f√∂r att f√∂rst√• varf√∂r det inte g√•r att dela med 0."
        ],
        specificTips: {
          "0": "T√§nk efter, om svaret vore 0, vad h√§nder om du multiplicerar 0 med 0?<br>"+ 
          "0 √ó 0 = 0, inte 11. S√• det kan inte st√§mma!",
          "11": "T√§nk efter, om du tar 11 √∑ 0 och f√•r 11 som svar, vad betyder det? D√• borde 11 √ó 0 = 11, men det blir ju 0! F√∂rs√∂k igen!",
          "infinity": "Bra tanke! Det √§r sant att talen blir j√§ttestora n√§r man delar med sm√• tal n√§ra noll.<br>"+
          "Men att dela med exakt noll g√•r inte, vi s√§ger att det √§r inte definierat, inte ens o√§ndligt."
  
        },
        explanation: "Att dela med 0 √§r inte till√•tet i matematiken. Det finns inget tal du kan multiplicera med 0 f√∂r att f√• 11. Enligt definitionen kan ingen division genom noll ge ett meningsfullt resultat och d√§rf√∂r s√§ger vi att det √§r <span style='color: red;'>'inte definierat'</span>.<br>"+
        "T√§nk dig att du har t.ex. 11 √§pplen och du f√∂rs√∂ker dela dessa √§pplen mellan 0 personer. Hur kan du dela dem n√§r det inte finns n√•gon att dela med? Det blir om√∂jligt att dela upp n√•got utan att ha n√•gon mottagare, s√• division med noll ger inget meningsfullt svar."
      },

      {
        category: "division",
        question: "Ber√§kna 2/3 √∑ 5 och svara i br√•kform.",
        answer: "2/15",
        tips: [
          "Kom ih√•g att v√§nda p√• det andra br√•ket n√§r du dividerar.",
          "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det inverterade andra br√•ket."
        ],
        specificTips: {
         "10/3": "Du ska dela <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> i 5 lika delar, blir det mer eller mindre √§n <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> ?<br>"+
         "Du har multiplicerat 5 med 2 ist√§llet f√∂r att dividera. F√∂rs√∂k igen och t√§nk p√• att dividera med 5, inte multiplicera!",
    "15/2": "Det verkar som att du har gjort 5 √∑ <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> ist√§llet f√∂r <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> √∑ 5. L√§s uppgiften en g√•ng till, vad √§r det som ska delas, 2/3 eller 5?",
    "17/3": "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det inverterade andra br√•ket."
        },
        explanation: "L√∂sning: <br> N√§r vi dividerar 2/3 med 5, m√•ste vi f√∂rst omvandla divisionen till en multiplikation. F√∂r att g√∂ra detta, inverterar vi det andra br√•ket (5). Vi kan skriva 5 som 5/1, och d√• f√•r vi: <br><br> 2/3 √∑ 5/1 = 2/3 * 1/5. <br><br> Nu multiplicerar vi t√§ljarna och n√§mnarna: (2 * 1)/(3 * 5) = 2/15 <br><br> S√• svaret blir 2/15."
      },
      {
        category: "division",
        question: "Ber√§kna 2 √∑ 1/13",
        answer: ["26", "26/1"],
        tips: [
          "Kom ih√•g att v√§nda p√• det andra br√•ket n√§r du dividerar.",
          "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det inverterade andra br√•ket."
        ],
        specificTips: {
          "2/13": "Kom ih√•g att dividera p√• r√§tt s√§tt, du m√•ste v√§nda p√• det andra br√•ket och sedan multiplicera.",
          "13/2": "Du har t√§nkt r√§tt som v√§nde p√• 1/13 till 13/1. Men man kan inte g√∂ra om 2 till 1/2. Ist√§llet ska du skriva om 2 som 2/1, eftersom 2 betyder 2 hela ‚Äì allts√• samma sak som 2/1.",
          "1/26": "Vid division med br√•k kan man inte g√∂ra om 2 till 1/2 och multiplicera med 1/13. Man ska i st√§llet skriva om 2 som 2/1 och multiplicera med det omv√§nda av 1/13, allts√• 13/1. F√∂rs√∂k igen!"
        },
        explanation: "2 √∑ (1/13) = 2 * (13/1) = 26. Du v√§nder p√• det andra br√•ket och multiplicerar."
      },
      {
        category: "division",
        question: "Ber√§kna 1/5 √∑ 2/7 och svara i br√•kform.",
        answer: "7/10",
        tips: [
          "Kom ih√•g att v√§nda p√• det andra br√•ket n√§r du dividerar.",
          "F√∂r att dividera br√•k, multiplicera det f√∂rsta br√•ket med det inverterade andra br√•ket."
        ],
        specificTips: {
          "14/35": "Kom ih√•g att dividera p√• r√§tt s√§tt, du m√•ste v√§nda p√• det andra br√•ket och sedan multiplicera.",
          "1/2": "F√∂rs√∂k att v√§nda det andra br√•ket och multiplicera. F√∂rs√∂k igen!"
        },
        explanation: "1/5 √∑ 2/7 = 1/5 * 7/2 = (1*7)/(5*2)= 7/10."
      },

//Multiplikation
      {
        category: "multiplication",
        question: "Ber√§kna 2/3 * 1/5 och svara i br√•kform.",
        answer: "2/15",
        tips: [
          "T√§nk p√• att n√§r du multiplicerar br√•k beh√∂ver du inte hitta gemensam n√§mnare och du ska inte invertera n√•got br√•k. Multiplicera bara t√§ljare med t√§ljare och n√§mnare med n√§mnare.",
          "Multiplicera bara t√§ljare med t√§ljare och n√§mnare med n√§mnare."
        ],
        specificTips: {
          "3/8": "Det ser ut som att du har adderat i st√§llet f√∂r att multiplicera.<br>" +
           "Kom ih√•g: Multiplicera t√§ljarna med varandra och n√§mnarna med varandra.",
           
           "3/15": "Det ser ut som att du har plusat ihop t√§ljarna ist√§llet f√∂r att multiplicera dem.<br>" +
            "Kom ih√•g: N√§r du multiplicerar br√•k, multiplicera t√§ljarna (2 √ó 1) och n√§mnarna (3 √ó 5), inte l√§gg ihop t√§ljarna. F√∂rs√∂k igen!",
            "1/5": "Det verkar som att du har f√∂renklat br√•ket fr√•n 3/15.<br>" +
           "Kom ih√•g att du inte beh√∂ver f√∂renkla n√§r du multiplicerar br√•k. Du ska multiplicera t√§ljare och n√§mnare direkt.<br>" +
           "F√∂rs√∂k igen! Multiplicera t√§ljarna med varandra och n√§mnarna med varandra.",

    "10/3": "T√§nk p√• att du inte ska v√§nda n√•got br√•k n√§r du multiplicerar.<br>" +
            "Bara multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.",

    "15/2": "Det verkar som att du har v√§nt p√• br√•ken.<br>" +
            "Vid multiplikation beh√∂ver du bara multiplicera t√§ljarna och n√§mnarna rakt av utan att v√§nda n√•got br√•k."
        },
        explanation: "L√∂sning: <br><br>" +
    "N√§r vi multiplicerar tv√• br√•k multiplicerar vi t√§ljare med t√§ljare och n√§mnare med n√§mnare:<br>" +
    "2/3 √ó 1/5 = (2 √ó 1)/(3 √ó 5) = 2/15<br><br>" +
    "Svar: 2/15."
      },
      
      {
        category: "multiplication",
        question: "Ber√§kna 1/4 * 1/3 och svara i br√•kform.",
        answer: "1/12",
        tips: [
           "T√§nk p√• att n√§r du multiplicerar br√•k, multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.",
    "F√∂r att l√∂sa detta, multiplicera f√∂rst t√§ljarna och multiplicera sedan n√§mnarna."
        ],
        specificTips: {
          "1/7": "Det verkar som att du har adderat n√§mnarna ist√§llet f√∂r att multiplicera dem.<br>"+
          "Kom ih√•g att n√§r du multiplicerar br√•k ska du <span style='color: red;'>multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare</span>. F√∂rs√∂k igen!<br>",
          "2/7": "Det ser ut som att du har adderat b√•de t√§ljare (1 + 1) och n√§mnare (4 + 3) ist√§llet f√∂r att multiplicera dem.<br>"+ 
          "Kom ih√•g att n√§r du multiplicerar br√•k, ska du <span style='color: red;'>multiplicera t√§ljarna med t√§ljarna</span> och <span style='color: red;'>n√§mnarna med n√§mnarna</span>.",
      
          "3/4": "Har du r√•kat v√§nda ett br√•k? Det g√∂r man bara vid division.",
          "2/12": "Det ser ut som att du har adderat t√§ljarna (1 + 1) ist√§llet f√∂r att multiplicera dem.<br>"+
          "Kom ih√•g att n√§r du multiplicerar br√•k, ska du multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.<br>",
          "1/6": "Det ser ut som att du har adderat t√§ljarna (1 + 1) ist√§llet f√∂r att multiplicera dem.<br>"+
          "Kom ih√•g att n√§r du multiplicerar br√•k, ska du multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.<br>",
          "1/8": "Har du blandat ihop siffrorna? Multiplicera t√§ljarna och n√§mnarna korrekt.",
        },
        explanation: "F√∂r att multiplicera br√•k, multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare:<br>" +
               "1 √ó 1 = 1 och 4 √ó 3 = 12 <br>" +
               "D√§rf√∂r blir svaret <span class='fraction'><span class='top'>1</span><span class='bottom'>12</span></span>."
      },
      
      
      {
        category: "multiplication",
        question: "Ber√§kna 1/9 * 2/5 * 3/7 och svara i enklaste form.",
        answer: "2/105", 
        tips: [
          "Kom ih√•g att vid multiplikation av br√•k multiplicerar du t√§ljare med t√§ljare och n√§mnare med n√§mnare.",
          "T√§nk p√• att du inte beh√∂ver samma n√§mnare n√§r du multiplicerar br√•k."
        ],
        specificTips: {
         "6/21": "Kom ih√•g att multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare, inte addera dem. F√∂rs√∂k igen!",
    "6/315": "Bra jobbat! Det √§r r√§tt produkt men inte i enklaste form. F√∂rs√∂k att f√∂rkorta det.",
    "105/2": "Det verkar som att du har v√§nt br√•ken. Vid multiplikation v√§nder man inte p√• br√•ken, bara multiplicera rakt av."

        },
        explanation:  "L√∂sning: <br><br>" +
    "Multiplicera t√§ljarna: 1 √ó 2 √ó 3 = 6<br>" +
    "Multiplicera n√§mnarna: 9 √ó 5 √ó 7 = 315<br><br>" +
    "S√•: 1/9 √ó 2/5 √ó 3/7 = 6/315<br><br>" +
    "F√∂rkorta br√•ket:<br>" +
    "B√•de 6 och 315 kan delas med 3:<br>" +
    "6/3 = 2 och 315/3 = 105.<br><br>" +
    "Svar i enklaste form: 2/105."
      },

      {
        category: "multiplication",
        question: "Ber√§kna 3/4 * 2/7 och svara i enklaste form.",
        answer: "3/14",
        tips: [
          "T√§nk p√• att du inte beh√∂ver samma n√§mnare n√§r du multiplicerar br√•k.",
          "Multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare."
        ],
        specificTips: {
          "5/11": "Kom ih√•g att multiplicera t√§ljarna med varandra och n√§mnarna med varandra.",
          "6/28": "Bra jobbat! Det √§r r√§tt svar men inte i enklaste form. F√∂rs√∂k att f√∂rkorta det.",
          "21/8": "Har du r√•kat v√§nda ett br√•k? Det g√∂r man bara vid division.",
          "10/14": "Har du blandat ihop siffrorna? Multiplicera t√§ljarna och n√§mnarna korrekt.",
          "28/6": "Det verkar som att du har v√§nt b√•da br√•ken, det ska du inte g√∂ra vid multiplikation!"
        },
        explanation:  "L√∂sning: <br><br>" +
    "Multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare:<br>" +
    "3/4 √ó 2/7 = (3 √ó 2)/(4 √ó 7) = 6/28<br><br>" +
    "Nu f√∂rkortar vi br√•ket:<br>" +
    "6/2 = 3 och 28/2 = 14, s√• 6/28 = 3/14<br><br>" +
    "Svar: 3/14."
      },

      {
        category: "multiplication",
        question: "Ber√§kna  1/2 * 3/4 och svara i br√•kform.",
        answer: "3/8",
        tips: [
          "Kom ih√•g att multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.",
          "T√§nk p√• att du inte beh√∂ver samma n√§mnare n√§r du multiplicerar br√•k."
        ],
        specificTips: {
          "4/6": "Kom ih√•g att multiplicera t√§ljarna och n√§mnarna, inte addera dem.",
          "2/3": "Du verkar ha blandat ihop addition och multiplikation. F√∂rs√∂k igen!",
          "4/8": "Kom ih√•g att multiplicera t√§ljarna och n√§mnarna, inte addera ihop t√§ljarna. F√∂rs√∂k igen."
        },
        explanation: "1/2 * 3/4 = 3/8. Multiplicera 1*3 och 2*4."
      },
      

// L√ñSA EKVATIONER
      {
        category: "equation",
        question: "L√∂s ekvationen: x + 1/3 = 6",
        answer: "17/3",
        tips: [
          "F√∂r att l√∂sa ekvationen: b√∂rja med att f√• x-termen ensam p√• ena sidan genom att subtrahera med <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span>.",
    "T√§nk p√• att du m√•ste ta bort br√•ket <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> fr√•n andra sidan. F√∂r att g√∂ra det, skriv om 6 som <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span>, s√• att du kan subtrahera.",
    "Kom ih√•g att n√§r du subtraherar br√•k m√•ste de ha samma n√§mnare. Skriv om b√•da br√•ken till att ha n√§mnaren 3 och subtrahera sedan t√§ljarna."
         
        ],
        specificTips: {

          "5/3": "Du vill ta bort en tredjedel fr√•n 6. Men f√∂r att det ska g√•, beh√∂ver du skriva 6 som ett br√•k med samma n√§mnare, allts√•: 6 √§r samma som <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span>. F√∂rs√∂k igen.",
        "17": "Om x = 17, d√• blir 17 + <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span>, vilket inte √§r lika med <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span>. Man kan inte addera 17 direkt med <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span>, utan man beh√∂ver ha samma n√§mnare. F√∂rs√∂k igen!",
       "5": "Det verkar som om du har subtraherat <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> fr√•n 6 utan att skriva om 6 som ett br√•k med samma n√§mnare. F√∂r att kunna subtrahera br√•k, m√•ste du ha samma n√§mnare. F√∂rs√∂k att skriva om 6 som <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span> ist√§llet f√∂r att bara subtrahera <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span>direkt fr√•n 6. N√§r du har gjort det, kan du subtrahera t√§ljarna och f√• r√§tt resultat. F√∂rs√∂k igen!",
       "52/3": "Om x = <span class='fraction'><span class='top'>52</span><span class='bottom'>3</span></span>, d√• blir <span class='fraction'><span class='top'>52</span><span class='bottom'>3</span></span> + <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> = <span class='fraction'><span class='top'>53</span><span class='bottom'>3</span></span>, vilket inte √§r lika med 6. Det verkar som att du har lagt ihop t√§ljarna fel eller gjort en multiplicering n√§r du inte beh√∂vde det.<br>"+
       "Kom ih√•g att du ska subtrahera <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> fr√•n 6, men f√∂rst m√•ste du skriva om 6 som ett br√•k med samma n√§mnare, allts√• <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span>. F√∂rs√∂k igen!",
        "3": "Det verkar som om du har missat att subtrahera korrekt. Kom ih√•g att n√§r du ska isolera x, beh√∂ver du g√∂ra det p√• b√•da sidor av ekvationen, inte bara p√• ena sidan.",
        },

        explanation:  [
  "F√∂r att l√∂sa ekvationen <b>x + <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> = 6</b>, b√∂rja med att f√• x ensam genom att subtrahera <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> fr√•n b√•da sidor:<br><br>" +
  
  "Det blir:<br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;x = 6 - <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span><br><br>" +
  
  "<b>Steg 1:</b><br>" +
  "F√∂r att kunna subtrahera beh√∂ver vi skriva om 6 som ett br√•k med n√§mnare 3:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;6 = <span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span><br><br>" +
  
  "<b>Steg 2:</b><br>" +
  "Nu kan vi subtrahera:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>18</span><span class='bottom'>3</span></span> - <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> = <span class='fraction'><span class='top'>17</span><span class='bottom'>3</span></span><br><br>" +
  
  "<b>Slutsats:</b><br>" +
  "x = <b><span class='fraction'><span class='top'>17</span><span class='bottom'>3</span></span></b>."
]
      },

    
      {
          category: "equation",
          question: "L√∂s ekvationen: x - 2/3 = 4",
          answer: "14/3",
          tips: [
            {
              condition: (input) => input.trim() === "5" || input.trim() === "13",
              text: "Om du multiplicerar med 3 m√•ste du g√∂ra det p√• alla termer √§ven x."
            },
            {
              condition: (input) => input.trim() === "6/3"|| input.trim() === "2",
              text: "Du har tagit 4 + 2/3! Hur kan du r√§kna ihop det? OBS! F√∂r att kunna addera tv√• br√•k m√•ste vi ha samma n√§mnare."
            },
            {
      condition: (input) => input.trim() === "2" || input.trim() === "6",
      text: "Kom ih√•g att om du ska f√• x ensamt, m√•ste du g√∂ra motsatsen till subtraktion, allts√• addera <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> till b√•da sidor."
    },
           
            {
      condition: () => true,
      text: "F√∂r att l√∂sa ekvationen: isolera x genom att addera <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> p√• b√•da sidor."
    }
          ],
          specificTips: {
            "6/3": "Du har tagit 4 + <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span>! Hur kan du r√§kna ihop det? OBS! F√∂r att kunna addera tv√• br√•k m√•ste vi ha samma n√§mnare.",
            "5": "Kom ih√•g att du m√•ste multiplicera b√•da sidor av ekvationen med samma tal f√∂r att f√• x ensamt.",
            "6": "Det verkar som att du bara adderade 2 till 4, men gl√∂mde att hantera br√•ket korrekt. T√§nk p√• att <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> √§r ett br√•k, inte ett heltal.",
    "4": "Du gl√∂mde att ta bort -<span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span>. Kom ih√•g att x ska st√• ensam p√• ena sidan.",
    "2": "Kanske t√§nkte du att du skulle subtrahera i st√§llet f√∂r att addera? Kom ih√•g att g√∂ra motsatsen f√∂r att f√• x ensamt."
          },
          explanation: "L√∂sning:<br><br>" +
    "Vi ska l√∂sa ekvationen: <b>x - <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> = 4</b><br><br>" +
    "<b>Steg 1:</b><br>" +
    "Addera <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> p√• b√•da sidor f√∂r att f√• x ensam:<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;x - <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> + <span style='color: red;'><span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span></span> = 4 + <span style='color: red;'><span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span><br><br></span>" +
    "D√• har vi: x = 4 + <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span><br><br>" +
    "<b>Steg 2:</b><br>" +
    "G√∂r om 4 till ett br√•k med n√§mnare 3: <br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;4 = <span class='fraction'><span class='top'>12</span><span class='bottom'>3</span></span><br><br>" +
    "S√•:<br><br>" +
    "x = &nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>12</span><span class='bottom'>3</span></span> + <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> = <span class='fraction'><span class='top'>14</span><span class='bottom'>3</span></span><br><br>" +
    "<b>Slutsats:</b> x = <b><span class='fraction'><span class='top'>14</span><span class='bottom'>3</span></span></b>"
        },

        {
        category: "equation",
        question: "L√∂s ekvationen: x/3 = 27",
        answer: "81",
        tips: [
          {
            condition: (input) => input.trim() === "5" || input.trim() === "30",
            text: "Kom ih√•g att divisionens motsats √§r multiplikation. F√∂r att bli av med divisionen med 3, multiplicera b√•da sidor av ekvationen med 3."
          },
          {
            condition: (input) => input.trim() === "27",
            text: "T√§nk p√• att ùë• √§r ett tal som, n√§r det delas med 3, ger 27. S√• f√∂r att hitta ùë•, m√•ste du g√∂ra motsatsen till divisionen."
          },
          {
            condition: () => true,
            text: "x √§r i t√§ljaren. N√§r du vill bli av med divisionen, m√•ste du multiplicera b√•da sidor av ekvationen med 3"
          }
        ],
        specificTips: {
          "24": "Du verkar ha blandat ihop division och multiplikation. F√∂rs√∂k igen!",
          "30": "Du verkar ha adderat 3 ist√§llet f√∂r att multiplicera. F√∂rs√∂k igen!",
        },
        explanation: "L√∂sning:<br><br>" +
    "Vi ska l√∂sa ekvationen: <b><span class='fraction'><span class='top'>x</span><span class='bottom'>3</span></span> = 27</b><br><br>" +
    "<b>Steg 1:</b><br>" +
    "x √§r delat med 3. F√∂r att f√• x ensamt, multiplicera b√•da sidor med 3:<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;<b><span class='fraction'><span class='top'>x</span><span class='bottom'>3</span></span> √ó <span style='color: red;'>3</span>= 27 √ó <span style='color: red;'>3</span><br><br>" +
    "<b>Steg 2:</b><br>" +
    "Division och multiplikation tar ut varandra p√• v√§nster sida, s√• vi f√•r:<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;x = 27 √ó 3<br><br>" +
    "<b>Steg 3:</b><br>" +
    "R√§kna ut 27 √ó 3= 81<br><br>" +
    "<b>Svar:</b> x = <b>81</b>"
      },



      
      
      {
        category: "equation",
        question: "L√∂s ekvationen: x/2 - 3 = 5/4 och svara i br√•kform",
        answer: "17/2",
        tips: [ "F√∂r att l√∂sa ekvationen, b√∂rja med att isolera x-termen p√• ena sidan genom att ta bort -3.",
    "L√§gg till 3 p√• b√•da sidor av ekvationen f√∂r att bli av med -3.",
    "N√§r du har x/2 = n√•got, multiplicera b√•da sidor med 2 f√∂r att f√• x.",
    "Kom ih√•g att n√§r du l√§gger till br√•k m√•ste du ha samma n√§mnare. Skriv om 3 som 12/4 f√∂r att addera till 5/4."
          
        ],
        specificTips: {
        
          "5/4": "Det verkar som om du har kopierat det som redan stod i ekvationen. F√∂rs√∂k att l√∂sa ekvationen steg f√∂r steg.<br>"+
          "B√∂rja med att ta bort -3 genom att l√§gga till 3 p√• b√•da sidor.",
    "11/4": "Kom ih√•g att 3 kan skrivas som <span class='fraction'><span class='top'>12</span><span class='bottom'>4</span></span>.<br>"+
    "S√• n√§r du adderar 3 till <span class='fraction'><span class='top'>5</span><span class='bottom'>4</span></span> blir det <span class='fraction'><span class='top'>17</span><span class='bottom'>4</span></span>. F√∂rs√∂k igen!",
    "17/4": "Bra jobbat! Du har l√∂st ekvationen fram till <span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span> = <span class='fraction'><span class='top'>17</span><span class='bottom'>4</span></span>.<br>"+
    "Nu m√•ste du multiplicera b√•da sidor med 2 f√∂r att isolera x. F√∂rs√∂k igen!",
    "8.5": "Du har r√§tt svar i decimalform, men uppgiften kr√§ver att svaret skrivs i br√•kform. Skriv om 8.5 som <span class='fraction'><span class='top'>17</span><span class='bottom'>2</span></span>.",
    "34": "Det verkar som om du kanske har multiplicerat fel. Kom ih√•g att n√§r du multiplicerar 2 med <span class='fraction'><span class='top'>17</span><span class='bottom'>4</span></span>, blir det <span class='fraction'><span class='top'>34</span><span class='bottom'>4</span></span>, och det f√∂rkortas till <span class='fraction'><span class='top'>17</span><span class='bottom'>2</span></span>. F√∂rs√∂k igen!"
},
         
        explanation: [
        "Vi l√∂ser ekvationen: <b><span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span> - 3 = 5/4</b><br><br>"+
    
    "Steg 1: L√§gg till 3 p√• b√•da sidor f√∂r att ta bort -3:<br>"+
    "<span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span> - 3 <span style='color: red;'>+ 3</span> = 5/4 + <span style='color: red;'>3</span><br><br>"+
    "<span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span> = 5/4 + 3<br><br>"+
    "F√∂r att addera, skriv om 3 som <span class='fraction'><span class='top'>12</span><span class='bottom'>4</span></span>:<br>"+
    "<span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span> = 5/4 + <span class='fraction'><span class='top'>12</span><span class='bottom'>4</span></span><br>"+
    "<span class='fraction'><span class='top'>x</span><span class='bottom'>2</span></span>=<span class='fraction'><span class='top'>17</span><span class='bottom'>4</span></span><br><br>"+

    "Steg 2: Multiplicera b√•da sidor med 2 f√∂r att ta bort n√§mnaren:<br><br>"+
    "x = 2 ¬∑ <span class='fraction'><span class='top'>17</span><span class='bottom'>4</span></span> = <span class='fraction'><span class='top'>34</span><span class='bottom'>4</span></span> = <b><span class='fraction'><span class='top'>17</span><span class='bottom'>2</span></span></b><br><br>"+

    "<b>Slutsats:</b> x = <b><span class='fraction'><span class='top'>17</span><span class='bottom'>2</span></span></b>"
  ]
      
}, 
   

      {
        category: "equation",
        question: "L√∂s ekvationen: 13x/2 = 52",
        answer: "8",
        tips: [
        {
    condition: (input) => input.trim() === "5" || input.trim() === "39",
    text: "T√§nk p√• att om du har 13x/2 = 52 s√• vill du f√∂rst bli av med n√§mnaren (2) genom att multiplicera b√•da sidor med 2. Sen delar du med 13 f√∂r att l√∂sa ut x."
  },
  {
    condition: (input) => input.trim() === "27",
    text: "Dubbelkolla stegen! Multiplicera f√∂rst b√•da sidor med 2, sedan dela med 13."
  },
  {
      condition: (input) => input.trim() === "4" || input.trim() === "2",
      text: "T√§nk p√• att du f√∂rst m√•ste bli av med divisionen med 2 genom att multiplicera b√•da sidor med 2 innan du delar p√• 13."
    },
  {
      condition: (input) => input.trim() === "52",
      text: "Kom ih√•g att x √§r multiplicerat med 13 och sedan delat p√• 2. Du beh√∂ver isolera x steg f√∂r steg!"
    },
  {
      condition: () => true,
      text: "F√∂r att l√∂sa ekvationen: f√∂rst multiplicera b√•da sidor med 2 f√∂r att bli av med n√§mnaren och sedan dela med 13 f√∂r att f√• fram x."
    }
  
],

specificTips: {
  "39": "Det ser ut som att du subtraherat 13 fr√•n 52, men det √§r inte det vi ska g√∂ra h√§r.<br>"+
  "F√∂r att l√∂sa ekvationen beh√∂ver du f√∂rst multiplicera b√•da sidor med 2 f√∂r att f√• bort n√§mnaren.",
  
  "65": "Du verkar ha lagt till 13 till 52, men vi ska inte addera h√§r. T√§nk p√• att du har en division i v√§nsterledet (13x/2), s√• b√∂rja med att multiplicera b√•da sidor med 2.",
  
  "2": "Du kanske delade 52 med 26? Kom ih√•g att du f√∂rst m√•ste multiplicera b√•da sidor med 2 f√∂r att bli av med n√§mnaren.",
  
  "4": "Halvv√§gs d√§r! Kom ih√•g att 13x/2 = 52 ‚Üí multiplicera med 2 s√• f√•r du 13x = 104, sen delar du 104 med 13.",
  
  "104": "Du har gjort r√§tt steg att multiplicera 52 med 2, men gl√∂m inte att sedan dela med 13 f√∂r att l√∂sa ut x.",
},

explanation: [
  "L√∂sning:<br><br>" +
    "Vi ska l√∂sa ekvationen: <b>13x/2 = 52</b><br><br>" +
    "<b>Steg 1:</b><br>" +
    "Bli av med n√§mnaren 2 genom att multiplicera b√•da sidor med 2:<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;(13x/2) √ó 2 = 52 √ó 2<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;13x = 104<br><br>" +
    "<b>Steg 2:</b><br>" +
    "Nu dela b√•da sidor med 13 f√∂r att isolera x:<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;13x √∑ 13 = 104 √∑ 13<br><br>" +
    "&nbsp;&nbsp;&nbsp;&nbsp;x = 8<br><br>" +
    "<b>Slutsats:</b> x = <b>8</b>"
]
      },



      // J√§mf√∂ra br√•k
      {
        category: "compare_order",
        question: "Vilket br√•ktal √§r st√∂rst? 3/5 eller 2/3?",
        answer: "2/3",
        tips: [
          "F√∂r att avg√∂ra vilket br√•k som √§r st√∂rst, kan du antingen skriva om b√•da br√•ken med en gemensam n√§mnare eller omvandla dem till decimalform och j√§mf√∂ra.",
    "Kom ih√•g: n√§r n√§mnarna √§r lika kan du enkelt j√§mf√∂ra t√§ljarna."
        ],

        specificTips: {
            "3/5": "Det verkar som att du bara tittat p√• t√§ljarna (3 och 2), men n√§r du j√§mf√∂r br√•k m√•ste du ocks√• t√§nka p√• n√§mnarna.<br>"+
            "Ett st√∂rre tal i t√§ljaren betyder inte alltid ett st√∂rre br√•k om n√§mnarna √§r olika. Prova att hitta en gemensam n√§mnare och j√§mf√∂r igen!",
    "0.6": "Bra att du t√§nkte i decimalform! 3/5 = 0,6 och 2/3 ‚âà 0,666... S√• 2/3 √§r faktiskt st√∂rre. Var noga med decimalernas v√§rde!",
          },
        explanation:  "F√∂r att j√§mf√∂ra br√•ken <span class='fraction'><span class='top'>3</span><span class='bottom'>5</span></span> och <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span>, beh√∂ver vi f√∂rst hitta en gemensam n√§mnare.<br><br>"+
  "Minsta gemensamma n√§mnare f√∂r 5 och 3 √§r 15.<br><br>"+
  "Vi f√∂rl√§nger b√•da br√•ken s√• att n√§mnaren blir 15:<br><br>"+
  "F√∂r <span class='fraction'><span class='top'>3</span><span class='bottom'>5</span></span> multiplicerar vi b√•de t√§ljare och n√§mnare med <span style='color: red;'>3</span>:<br>"+
  "<span class='fraction'><span class='top'>3 √ó 3</span><span class='bottom'>5 √ó 3</span></span> = <span class='fraction'><span class='top'>9</span><span class='bottom'>15</span></span><br><br>"+
  "F√∂r <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> multiplicerar vi b√•de t√§ljare och n√§mnare med <span style='color: red;'>5</span>:<br>"+
  "<span class='fraction'><span class='top'>2 √ó 5</span><span class='bottom'>3 √ó 5</span></span> = <span class='fraction'><span class='top'>10</span><span class='bottom'>15</span></span><br><br>"+
  "Nu j√§mf√∂r vi <span class='fraction'><span class='top'>9</span><span class='bottom'>15</span></span> och <span class='fraction'><span class='top'>10</span><span class='bottom'>15</span></span><br>"+
  "Eftersom 10/15 √§r st√∂rre √§n 9/15, √§r <b>2/3 st√∂rre √§n 3/5</b>."
      },


      {
        category: "compare_order",
        question: "Vilket br√•ktal √§r st√∂rst? 4 5/6 eller 4/3?",
        answer: "4 5/6",
        tips: [
          "N√§r ett av talen √§r i blandad form, som 4 <span class='fraction'><span class='top'>5</span><span class='bottom'>6</span></span>, √§r det bra att f√∂rst g√∂ra om det till ett br√•k eller decimaltal. D√• blir det l√§ttare att j√§mf√∂ra.",
  
        ],
        specificTips: {
            "4/3": "Titta noga p√• vad 4<span class='fraction'><span class='top'>5</span><span class='bottom'>6</span></span> betyder. Det √§r ett blandat tal: 4 hela plus <span class='fraction'><span class='top'>5</span><span class='bottom'>6</span></span>, vilket n√§stan blir 5. D√§remot √§r <span class='fraction'><span class='top'>4</span><span class='bottom'>3</span></span> mindre √§n 2. Fundera p√• vilken som √§r st√∂rst d√•!",
          },
        explanation:  [
  "L√∂sning: <br>"+
  "<br>"+
  "Vi j√§mf√∂r tv√• tal: det blandade talet <b>4 5/6</b> och br√•ket <b>4/3</b>.<br>"+
  "<br>"+
  "Steg 1. B√∂rja med att g√∂ra om <b>4 5/6</b> till ett br√•k:<br>"+
  "Ett blandat tal best√•r av ett heltal och ett br√•k. F√∂r att omvandla det till ett br√•k multiplicerar vi heltalet (4) med n√§mnaren (6) och adderar t√§ljaren (5):<br>"+
  "4 √ó 6 + 5 = 29<br>"+
  "T√§ljaren blir allts√• 29 och n√§mnaren beh√•ller vi som 6: &nbsp;&nbsp;&nbsp;&nbsp;4 5/6 = 29/6 <br>"+
  "Steg 2. Nu j√§mf√∂r vi <b>29/6</b> och <b>4/3</b>. Vi g√∂r om dem till samma n√§mnare f√∂r att kunna j√§mf√∂ra:<br>"+
  "F√∂r br√•ket <b><span class='fraction'><span class='top'>4</span><span class='bottom'>3</span></span></b> multiplicerar vi b√•de t√§ljare och n√§mnare med 2:<br>"+
  "&nbsp;&nbsp;&nbsp;&nbsp;4/3 = (4 √ó 2)/(3 √ó 2) = 8/6<br>"+
  "<br>"+
  "Steg 3. Nu ser vi att:<br>"+
  "&nbsp;&nbsp;&nbsp;&nbsp;29/6 > 8/6<br>"+
  "<br>"+
  "<b>Slutsats:</b> 4 5/6 √§r st√∂rre √§n 4/3.<br>"
]
      },
    
      {
        category: "compare_order",
        question: "P√• ett kalas f√•r du v√§lja en t√•rtbiten fr√•n fyra olika bitar. Vilken bit √§r st√∂rst 5/10, 3/8 eller 7/12 ?",
        answer: "7/12",
        tips: [
          "F√∂r att avg√∂ra vilken bit som √§r st√∂rst, kan vi j√§mf√∂ra br√•ken genom att g√∂ra om dem till gemensamma n√§mnare eller j√§mf√∂ra deras decimalv√§rden.",
          "T√§nk p√• br√•ken som delar av en t√•rta: <span class='fraction'><span class='top'>5</span><span class='bottom'>10</span></span>= h√§lften,  <span class='fraction'><span class='top'>3</span><span class='bottom'>8</span></span>= mindre √§n h√§lften,  <span class='fraction'><span class='top'>7</span><span class='bottom'>12</span></span>= mer √§n h√§lften"
        ],
        specificTips: {
  "5/10": "Du valde <span class='fraction'><span class='top'>5</span><span class='bottom'>10</span></span>, vilket √§r h√§lften. Det √§r ett bra f√∂rs√∂k, men titta noga p√• de andra alternativen! Finns det kanske ett br√•k som √§r mer √§n h√§lften? Testa att j√§mf√∂ra dem med decimaler eller hitta en gemensam n√§mnare. F√∂rs√∂k igen!",
  
  "3/8": "Det ser ut som att du valde <span class='fraction'><span class='top'>3</span><span class='bottom'>8</span></span>. Kom ih√•g att <span class='fraction'><span class='top'>3</span><span class='bottom'>8</span></span> √§r mindre √§n h√§lften. Finns det kanske ett alternativ som ger dig en st√∂rre del av t√•rtan? Prova att r√§kna ut ungef√§r hur mycket varje br√•k √§r i decimalform!",

  "5/12": "Hmm, 5/12 var inte ett av de alternativ som fanns i fr√•gan. L√§s g√§rna uppgiften en g√•ng till och kika efter 5/10, 3/8 och 7/12!"
},
explanation: [
  "Vi ska ta reda p√• vilken t√•rtbit som √§r st√∂rst. Alla br√•k visar hur stor del av en hel t√•rta du f√•r. <br><br>"+

  "<b>Alternativ 1: J√§mf√∂r som decimaler</b><br>"+
  "5/10 = 0,5<br>"+
  "3/8 = 0,375<br>"+
  "7/12 ‚âà 0,583<br>"+
  "‚Üí <b>7/12</b> √§r st√∂rst.<br><br>"+

  "<b>Alternativ 2: J√§mf√∂r med gemensam n√§mnare</b><br>"+
  "Vi hittar en gemensam n√§mnare f√∂r 10, 8 och 12. Minsta gemensamma n√§mnare (MGN) √§r 120.<br><br>"+

  "5/10 = (5 √ó 12)/(10 √ó 12) = 60/120<br><br>"+
  "3/8 = (3 √ó 15)/(8 √ó 15) = 45/120<br><br>"+
  "7/12 = (7 √ó 10)/(12 √ó 10) = 70/120<br><br>"+

  "‚Üí Nu ser vi att: 45/120 < 60/120 < 70/120<br><br>"+
  "‚Üí Allts√• √§r <b>7/12</b> st√∂rst.<br><br>"+

  "<b>Slutsats:</b> Oavsett om du j√§mf√∂r med decimaler eller gemensam n√§mnare, √§r <b>7/12</b> den st√∂rsta t√•rtbiten ‚Äì v√§lj den om du vill ha mest!"
  ]
      },

      {
        category: "compare_order",
        question: "Vilken pizzabit √§r st√∂rst: 4/8 ; 1/15 ; 2/3 ; 1/4?",
        answer: "2/3",
        tips: [
          "F√∂r att avg√∂ra vilken pizzabit som √§r st√∂rst, kan vi j√§mf√∂ra br√•ken genom att g√∂ra om dem till gemensamma n√§mnare eller j√§mf√∂ra deras decimalv√§rden.",
          "T√§nk p√• br√•ken som delar av en pizza: 4/8 = h√§lften, 1/15 = v√§ldigt liten bit, 2/3 = mer √§n h√§lften, 1/4 = ganska liten"
        ],
        specificTips: {
  "4/8": "Det verkar som att du valde <span class='fraction'><span class='top'>4</span><span class='bottom'>8</span></span> eftersom det √§r en halv och det k√§nns som ganska mycket. Men t√§nk p√• att <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span> √§r mer √§n en halv. Prova att j√§mf√∂ra dem som decimaler eller med gemensam n√§mnare. F√∂rs√∂k igen!",
  "1/4": "Bra f√∂rs√∂k! <span class='fraction'><span class='top'>1</span><span class='bottom'>4</span></span> √§r en fj√§rdedel av pizzan, men det √§r mycket mindre √§n b√•de <span class='fraction'><span class='top'>4</span><span class='bottom'>8</span></span> (en halv) och <span class='fraction'><span class='top'>2</span><span class='bottom'>3</span></span>. Testa att j√§mf√∂ra som decimaler eller g√∂r om dem till gemensamma n√§mnare!",
  "1/15": "Oj, <span class='fraction'><span class='top'>1</span><span class='bottom'>15</span></span> √§r en v√§ldigt liten bit, bara en liten sk√§rva av pizzan. Fundera p√• vilket br√•k som faktiskt ger mest av en hel pizza. Prova att j√§mf√∂ra dem som decimaler eller med gemensam n√§mnare."
},
        explanation:  [
  "Vi ska ta reda p√• vilken pizzabit som √§r st√∂rst. Vi har fyra br√•k att j√§mf√∂ra: <b>4/8, 1/15, 2/3 och 1/4</b>.<br><br>",

  "<b>Alternativ 1: J√§mf√∂r som decimaler</b><br>"+
  "4/8 = 0,5<br>"+
  "1/15 ‚âà 0,067<br>"+
  "2/3 ‚âà 0,666...<br>"+
  "1/4 = 0,25<br>"+
  "‚Üí <b>2/3</b> √§r st√∂rst.<br><br>"+

  "<b>Alternativ 2: J√§mf√∂r med gemensam n√§mnare</b><br>"+
  "Minsta gemensamma n√§mnare (MGN) f√∂r 8, 15, 3 och 4 √§r 120.<br><br>"+

  "4/8 = 60/120<br>"+
  "1/15 = 8/120<br>"+
  "2/3 = 80/120<br>"+
  "1/4 = 30/120<br>"+
  "‚Üí Allts√• √§r <b>2/3</b> st√∂rst.<br><br>"+

  "<b>Slutsats:</b> V√§lj <b>2/3</b> om du vill ha mest pizza!"
],

      },
      {
        category: "compare_order",
        question: "Ordna f√∂ljande br√•k i storleksordning, b√∂rja med det minsta: 3/4, 2/3, 5/6, 1/2",
        answer: ["1/2, 2/3, 3/4, 5/6", "1/2 2/3 3/4 5/6"],
        tips: [
          "F√∂r att kunna j√§mf√∂ra br√•ken beh√∂ver de ha samma n√§mnare.",
          "T√§nk p√• att hitta den minsta gemensamma n√§mnaren (MGN) f√∂r alla n√§mnarna (4, 3, 6 och 2).",
          "F√∂r att f√• samma n√§mnare, multiplicera b√•de t√§ljare och n√§mnare i varje br√•k s√• att n√§mnaren blir 12.",
          "Kom ih√•g att du m√•ste multiplicera b√•de t√§ljaren och n√§mnaren med samma tal."
        ],
        specificTips: {
  "3/4, 2/3, 5/6, 1/2": "Det verkar som att du r√•kade b√∂rja med 3/4, men t√§nk efter 1/2 √§r ju bara halva kakan! Det borde vara minst. Prova att j√§mf√∂ra br√•ken med decimaler eller gemensam n√§mnare.",

  "5/6, 3/4, 2/3, 1/2": "Du har skrivit br√•ken i st√∂rst till minst, men fr√•gan bad dig att b√∂rja med det minsta. Kan du v√§nda p√• ordningen?",

  "1/2, 3/4, 2/3, 5/6": "Du har r√§tt att 1/2 √§r minst och 5/6 √§r st√∂rst, men i mitten har 3/4 och 2/3 hamnat i fel ordning. Testa att j√§mf√∂ra dem som decimaler: 2/3 ‚âà 0,666 och 3/4 = 0,75.",

  "2/3, 1/2, 3/4, 5/6": "Bra f√∂rs√∂k! Men 1/2 √§r mindre √§n 2/3, s√• det borde komma f√∂rst. Fundera p√• vad h√§lften egentligen betyder i j√§mf√∂relse med 2/3."

},
        explanation: [
  "Vi ska ordna br√•ken <b>3/4, 2/3, 5/6, 1/2</b> fr√•n minst till st√∂rst.<br><br>"+

  "<b>Alternativ 1: J√§mf√∂r som decimaler</b><br>"+
  "3/4 = 0,75<br>"+
  "2/3 ‚âà 0,666...<br>"+
  "5/6 ‚âà 0,833...<br>"+
  "1/2 = 0,5<br><br>"+
  "‚Üí R√§tt ordning √§r: <b>1/2, 2/3, 3/4, 5/6</b><br><br>"+

  "<b>Alternativ 2: Anv√§nd gemensam n√§mnare (t.ex. 12)</b><br>"+
  "3/4 = 9/12<br>"+
  "2/3 = 8/12<br>"+
  "5/6 = 10/12<br>"+
  "1/2 = 6/12<br><br>"+
  "‚Üí D√• blir ordningen: <b>6/12 (1/2), 8/12 (2/3), 9/12 (3/4), 10/12 (5/6)</b><br><br>"+

  "<b>Slutsats:</b> R√§tt ordning fr√•n minst till st√∂rst √§r: <b>1/2, 2/3, 3/4, 5/6</b>"
]
      },
      


      // NYA ORDPROBLEM ‚Üì‚Üì‚Üì

      {
        category: "word problem",
        question: "Ber√§kna tv√• sjundedelar av fem sj√§ttedelar. Svara i enklaste form.",
        answer: "5/21",
        specificTips: {
          "12/35": "Det verkar som att du har delat 2/7 med 5/6 i st√§llet f√∂r att multiplicera dem. Kom ih√•g: n√§r det st√•r 'av' i ett matematiskt sammanhang betyder det att du ska multiplicera, inte dividera. F√∂rs√∂k igen!",
  
  "42/10": "Kom ih√•g att n√§r du multiplicerar tv√• br√•ktal ska du multiplicera t√§ljare med t√§ljare och n√§mnare med n√§mnare.<br>" +
         "H√§r verkar det som att du kanske r√•kat v√§nda p√• b√•da br√•ken och sedan multiplicerat.<br>" +
         "Dubbelkolla: du ska inte invertera br√•ken n√§r du multiplicerar, bara vid division.",

  "47/42": "Det ser ut som att du har adderat 2/7 och 5/6 i st√§llet f√∂r att multiplicera dem.<br>" +
             "Kom ih√•g att 'av' betyder multiplikation, inte addition.",


  "10/42": "Du har gjort sj√§lva multiplikationen r√§tt, bra jobbat!<br>" +
         "Men t√§nk p√• att alltid f√∂rkorta br√•ket om det g√•r.<br>" +
         "Kan du hitta en gemensam faktor f√∂r 10 och 42?",

  "5/13": "Dubbelkolla vad du multiplicerat.<br>" +
            "7 √ó 6 ska bli 42 i n√§mnaren, inte 13.<br>" +
            "G√• tillbaka och r√§kna n√§mnarna igen.",

  "2/35": "Det verkar som att n√•got g√•tt snett i multiplikationen.<br>" +
            "Kontrollera att du multiplicerar t√§ljare med t√§ljare (2 √ó 5) och n√§mnare med n√§mnare (7 √ó 6)."
        },
        tips: [
          "N√§r du ser ordet 'av' i en br√•kuppgift, betyder det att du ska multiplicera.",
  "Multiplicera br√•ken genom att ta t√§ljare √ó t√§ljare och n√§mnare √ó n√§mnare.",
  "Gl√∂m inte att f√∂rkorta br√•ket om det g√•r efter att du multiplicerat!"
        ],
        explanation: [
  "Vi ska r√§kna ut <b>tv√• sjundedelar av fem sj√§ttedelar</b>. Det betyder att vi multiplicerar br√•ken:<br><br>"+
  "<b>2/7 √ó 5/6 = (2 √ó 5)/(7 √ó 6) = 10/42</b><br>"+
  "Nu f√∂rkortar vi br√•ket:<br>"+
  "<b>10/42 = 5/21</b> (b√•da kan delas med 2)<br><br>"+
  "<b>Slutsats:</b> Svaret √§r <b>5/21</b>."
],
      },

      {
        category: "word problem",
        question: "H√§lften av eleverna p√• en skola ska g√• p√• en konsert. Eleverna kommer att ta fem bussar. Hur stor andel av eleverna p√• skolan kommer det att finnas p√• varje buss?",
        answer: "1/10",
        
        tips: [
          "T√§nk att alla elever p√• skolan √§r en hel kaka. H√§lften av kakan ska delas mellan 5 bussar. Hur mycket kaka f√•r varje buss?"
        ],
        specificTips: {
          "1/2": "Du verkar ha tagit <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> av eleverna, men gl√∂mt att dela dem p√• 5 bussar.<br>"+
          "Kom ih√•g att du ska dela <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> med 5. F√∂rs√∂k igen!",
    
    "5/10": "N√§stan r√§tt tanke! Men du ska dela <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> p√• 5 bussar, inte bara skriva <span class='fraction'><span class='top'>5</span><span class='bottom'>10</span></span><br>"+
    "T√§nk p√• division: <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> √∑ 5.",
    
    "2/5": "Det verkar som att du har v√§nt p√• talen fel. N√§r du delar ett br√•k med ett heltal (som 5), multiplicerar du ist√§llet med <span class='fraction'><span class='top'>1</span><span class='bottom'>5</span></span>: <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> √ó <span class='fraction'><span class='top'>1</span><span class='bottom'>5</span></span> = <span class='fraction'><span class='top'>1</span><span class='bottom'>10</span></span>. Prova igen!",
    
    "5/2": "Det ser ut som att du r√•kat multiplicera <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> √ó 5 ist√§llet f√∂r att dela <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> med 5. Kom ih√•g: vi vill f√∂rdela h√§lften av eleverna p√• 5 bussar, inte fler! F√∂rs√∂k igen."

        },
        explanation: "H√§lften av eleverna motsvarar <span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span>.<br><br>" +
    "Denna h√§lft ska delas p√• 5 bussar, vilket √§r samma sak som att dividera:<br>" +
    "<span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> √∑ 5<br><br>" +
    "Att dela med 5 √§r samma sak som att multiplicera med <span class='fraction'><span class='top'>1</span><span class='bottom'>5</span></span>:<br>" +
    "<span class='fraction'><span class='top'>1</span><span class='bottom'>2</span></span> √ó <span class='fraction'><span class='top'>1</span><span class='bottom'>5</span></span> = <span class='fraction'><span class='top'>1</span><span class='bottom'>10</span></span><br><br>" +
    "Allts√• kommer <b>varje buss ha <span class='fraction'><span class='top'>1</span><span class='bottom'>10</span></span> av skolans elever</b>."

      },
      {
        category: "word problem",
        question: "Lisa har en paj. Hon √•t upp 1/4 av pajen s√• att det finns bara 3/4 kvar. Hon vill spara h√§lften av det som finns kvar och ge den andra h√§lften till en kompis. Hur stor andel av pajen ger hon bort?",
        answer: "3/8",
        tips: [
          "Hon vill ge bort h√§lften av det, allts√• ska du r√§kna ut h√§lften av 3/4.",
          "Det som finns kvar √§r 3/4 av pajen, s√• vi ska r√§kna ut h√§lften av 3/4.",
          "T√§nk att pajen √§r en stor t√•rta. Lisa har 3/4 av t√•rtan kvar och hon vill ge bort h√§lften av det. Hur mycket √§r h√§lften av 3/4?",
        
        ],
        specificTips: {
          "1/2": "Det √§r h√§lften av en hel paj, men Lisa har bara 3/4 kvar. Du m√•ste ta h√§lften av 3/4. F√∂rs√∂k igen!",
    "1/4": "1/4 var det hon √•t upp, inte det hon ger bort. Titta p√• vad som finns kvar. F√∂rs√∂k igen!",
    "3/4": "Det √§r m√§ngden paj som finns kvar, inte den del hon ger bort. T√§nk: Vad √§r h√§lften av 3/4?",
    "1/8": "Dubbelkolla din multiplikation: 1/2 √ó 3/4 = 3/8, inte 1/8. F√∂rs√∂k igen!",
    "6/4": "Ditt svar √§r st√∂rre √§n en hel paj, vilket inte kan st√§mma. Fundera: kan man ge bort mer √§n vad som finns kvar?",
  "6/8": "Bra f√∂rs√∂k ‚Äì men 6/8 f√∂renklas till 3/4. Det √§r m√§ngden som finns kvar, inte vad hon ger bort. Kom ih√•g: vi s√∂ker h√§lften av 3/4. F√∂rs√∂k igen!"
  },
  explanation: [
    "Lisa har en hel paj fr√•n b√∂rjan.<br><br>"+
    "Hon √§ter upp 1/4 av pajen, s√• 3/4 finns kvar.<br><br>"+
    "Hon vill spara h√§lften av det som finns kvar och ge bort den andra h√§lften.<br><br>"+
    "Vi ska allts√• r√§kna ut h√§lften av 3/4.<br><br>"+
    "3/4 √ó 1/2 = 3/8<br><br>"+
    "Allts√• ger Lisa bort 3/8 av hela pajen."
  ]
      },
      {
        category: "word problem",
        question: "En tredjedel av eleverna p√• en skola ska vara med i en teaterf√∂rest√§llning. De delas in i 3 lika stora grupper. Hur stor andel av skolans elever √§r det i varje grupp?",
        answer: "1/9",
        tips: [
          "T√§nk att skolan √§r som en stor kaka. En tredjedel av kakan ska delas mellan 3 barn. Hur mycket kaka f√•r varje barn?"
        ],
        explanation: [
  "Vi vet att <b>en tredjedel</b> av skolans elever ska vara med i teatern.<br><br>" +

  "Det betyder att vi b√∂rjar med <span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> av alla elever.<br><br>" +

  "<b>Steg 1:</b><br>" +
  "Denna tredjedel ska delas i 3 lika stora grupper. Att dela betyder att vi dividerar:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> √∑ 3<br><br>" +

  "<b>Steg 2:</b><br>" +
  "N√§r vi dividerar ett br√•k med ett heltal, multiplicerar vi n√§mnaren:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>1</span><span class='bottom'>3</span></span> √∑ 3 = <span class='fraction'><span class='top'>1</span><span class='bottom'>9</span></span><br><br>" +

  "<b>Slutsats:</b><br>" +
  "I varje grupp √§r det <b><span class='fraction'><span class='top'>1</span><span class='bottom'>9</span></span></b> av skolans elever."
]


      },
      {
        category: "word problem",
        question: "En fj√§rdedel av eleverna p√• skolan ska delta i en stafett. De delas in i 2 lika stora lag. Hur stor andel av skolans elever √§r det i varje lag?",
        answer: "1/8",
        tips: [
          "F√∂rest√§ll dig att skolan √§r en stor t√•rta. En fj√§rdedel av t√•rtan delas upp i tv√• delar, hur stor √§r varje bit?"
        ],
        explanation: [
  "Vi vet att <b>en fj√§rdedel</b> av skolans elever ska vara med i stafetten.<br><br>" +

  "Det betyder att vi b√∂rjar med <span class='fraction'><span class='top'>1</span><span class='bottom'>4</span></span> av alla elever.<br><br>" +

  "<b>Steg 1:</b><br>" +
  "Denna fj√§rdedel ska delas in i 2 lika stora lag. Att dela betyder att vi dividerar:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>1</span><span class='bottom'>4</span></span> √∑ 2<br><br>" +

  "<b>Steg 2:</b><br>" +
  "N√§r vi dividerar ett br√•k med ett heltal, multiplicerar vi n√§mnaren med det talet:<br><br>" +
  "&nbsp;&nbsp;&nbsp;&nbsp;<span class='fraction'><span class='top'>1</span><span class='bottom'>4</span></span> √∑ 2 = " +
  "<span class='fraction'><span class='top'>1</span><span class='bottom'>8</span></span><br><br>" +

  "<b>Slutsats:</b><br>" +
  "I varje lag √§r det <b><span class='fraction'><span class='top'>1</span><span class='bottom'>8</span></span></b> av skolans elever."
]
      }
    ];

    

    function gcd(a, b) {
      return b ? gcd(b, a % b) : a;
    }

    function simplifyFraction(frac) {
      if (!frac.includes('/')) return frac.trim();
      const [num, den] = frac.split('/').map(Number);
      if (isNaN(num) || isNaN(den)) return frac.trim();
      const d = gcd(num, den);
      return `${num / d}/${den / d}`;
    }

    function normalizeAnswer(input) {
      return simplifyFraction(input.replace(/\s+/g, '').toLowerCase());
    }

 

    function showQuestion() {
      document.getElementById("tipBox").innerText = "";

      
  const q = filteredQuestions[currentQuestion];
const questionText = formatFractionsInText(insertSpaceBeforeFractions(q.question));

  document.getElementById("taskNumber").innerText = `Uppgift ${currentQuestion + 1}/${totalQuestions}`;

  if (currentQuestion === 0 || questions[currentQuestion - 1].category !== q.category) {
    const intro = categoryIntroductions[q.category] || "";
    document.getElementById("categoryIntro").innerText = intro;
  } else {
    document.getElementById("categoryIntro").innerText = "";
  }

  // üî• Den viktiga √§ndringen ‚Äì visa HTML-formatet
  document.getElementById("question").innerHTML = questionText;

  document.getElementById("feedback").innerText = "";
  document.getElementById("explanation").innerText = "";
  document.getElementById("explanation").style.display = "none";

  document.getElementById("answerInput").value = "";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("prevBtn").style.display = currentQuestion > 0 ? "inline" : "none";
  attempts = 0;
  document.getElementById("answerInput").style.display = "inline";
  document.querySelectorAll("button").forEach(btn => btn.style.display = "inline");

  const category = filteredQuestions[currentQuestion].category;
if (!firstTryStats[category]) {
  firstTryStats[category] = { correct: 0, total: 0 };
}
firstTryStats[category].total++;

const img = document.getElementById("questionImage");
if (q.image) {
  img.src = q.image;
  img.style.display = "block";
} else {
  img.style.display = "none";
}

updateProgressBar();

}



function launchConfetti() {
  const canvas = document.getElementById('confetti-canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const confetti = [];
  for (let i = 0; i < 150; i++) {
    confetti.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      r: Math.random() * 6 + 4,
      d: Math.random() * 40 + 10,
      color: `hsl(${Math.random() * 360}, 100%, 50%)`,
      tilt: Math.floor(Math.random() * 10) - 10,
      tiltAngle: 0,
      tiltAngleIncrement: Math.random() * 0.07 + 0.05
    });
  }

  let animationFrameId;

  function drawConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let i = 0; i < confetti.length; i++) {
      const p = confetti[i];
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI, false);
      ctx.fillStyle = p.color;
      ctx.fill();
      ctx.closePath();

      p.y += Math.cos(p.d) + 1 + p.r / 2;
      p.x += Math.sin(p.d);

      if (p.x > canvas.width + 20 || p.x < -20 || p.y > canvas.height) {
        confetti[i] = {
          x: Math.random() * canvas.width,
          y: -10,
          r: Math.random() * 6 + 4,
          d: Math.random() * 40 + 10,
          color: `hsl(${Math.random() * 360}, 100%, 50%)`,
          tilt: Math.floor(Math.random() * 10) - 10,
          tiltAngle: 0,
          tiltAngleIncrement: Math.random() * 0.07 + 0.05
        };
      }
    }
    animationFrameId = requestAnimationFrame(drawConfetti);
  }

  drawConfetti();

  // Stoppa och rensa efter 1.5 sekunder
  setTimeout(() => {
    cancelAnimationFrame(animationFrameId);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }, 2000);
}

function isCorrectAnswer(userInput, correctAnswer) {
  userInput = userInput.trim().toLowerCase();
  if (Array.isArray(correctAnswer)) {
    return correctAnswer.some(ans => userInput === ans.trim().toLowerCase());
  } else {
    return userInput === correctAnswer.trim().toLowerCase();
  }
}


function checkAnswer() {
  const userAnswer = document.getElementById("answerInput").value.trim();
  const q = filteredQuestions[currentQuestion];

  // Kolla specialfallet 11/0
  let correct;
  if (q.question.includes("11/0")) {
    const acceptedAnswers = [
      "inte definierat",
      "undefined",
      "ej definierat",
      "det g√•r inte att dela",
      "g√•r ej",
      "g√•r inte",
      "kan ej delas"
    ];
    correct = acceptedAnswers.includes(userAnswer.toLowerCase());
  } else {
    correct = isCorrectAnswer(userAnswer, q.answer);
  }

  const rawAnswer = userAnswer.trim();
  const normalized = normalizeAnswer(userAnswer);

  if (correct) {
    let feedback = "";

    // Visa specifikt tips om det finns, √§ven vid r√§tt svar
    if (q.specificTips && q.specificTips[rawAnswer]) {
      feedback = q.specificTips[rawAnswer];
    } else {
      feedback = "‚úÖ R√§tt svar!";
    }

    const feedbackEl = document.getElementById("feedback");
    feedbackEl.innerHTML = feedback;
    feedbackEl.style.display = "block";

    launchConfetti();

    if (attempts === 0) {
      correctFirstTry++;
      const category = q.category;
      if (firstTryStats[category]) {
        firstTryStats[category].correct++;
      }
    }

    document.getElementById("explanation").innerText = "";

    currentQuestion++;
    if (currentQuestion < totalQuestions) {
      setTimeout(showQuestion, 2000);
    } else {
      finishQuiz();
    }

  } else {
    // ‚ùå Fel svar ‚Äì ge tips eller visa "n√§sta" efter 3 f√∂rs√∂k
    attempts++;
    let tip = "F√∂rs√∂k igen!";

    // Visa specifikt tips om det finns f√∂r of√∂renklat svar
    if (q.specificTips && q.specificTips[rawAnswer]) {
      tip = q.specificTips[rawAnswer];
    } else if (isMinorCalculationError(userAnswer, q.answer)) {
      tip = "Det ser ut som att du har anv√§nt r√§tt metod, bra jobbat! Dubbelkolla om du kanske har r√§knat fel eller r√•kat skriva fel t√§ljare.";
    } else if (
      q.category === "multiplication" &&
      isMultiplicationMethodCorrect(userAnswer, q.answer, q.question)
    ) {
      tip = "Det ser ut som att du har anv√§nt r√§tt metod, bra jobbat! Dubbelkolla om du kanske har r√§knat fel eller r√•kat skriva fel n√§mnare.";
    } else if (Array.isArray(q.tips)) {
      if (typeof q.tips[0] === "object") {
        for (let i = 0; i < q.tips.length; i++) {
          if (q.tips[i].condition(userAnswer)) {
            tip = q.tips[i].text;
            break;
          }
        }
      } else if (q.tips[attempts - 1]) {
        tip = q.tips[attempts - 1];
      }
    }

    const feedbackEl = document.getElementById("feedback");
    feedbackEl.innerHTML = `üí° <strong>Tips:</strong> ${tip}`;
    feedbackEl.style.display = "block";

    if (attempts >= 3) {
      document.getElementById("explanation").innerHTML = `
        <strong>R√§tt svar:</strong> ${q.answer}<br>
        <em>${q.explanation}</em>`;
      document.getElementById("explanation").style.display = "block";
      document.getElementById("nextBtn").style.display = "inline";
      formatFractionsInElement("explanation");
    }
  }
}


    function skipToNext() {
      currentQuestion++;
      if (currentQuestion < totalQuestions) {
        showQuestion();
      } else {
        finishQuiz();
      }
    }


    function finishQuiz() {
       // 1) Efter de f√∂rsta 3 fr√•gorna, kontrollera felantalet
  if (!unlockExtraQuestions && currentQuestion === 3) {
    // Antal fel = 3 ‚Äì antal r√§tt p√• f√∂rsta f√∂rs√∂ket bland de 3
    const wrongCount = 3 - correctFirstTry;

    if (wrongCount >= 2) {
      // L√•s upp tv√• extra uppgifter
      unlockExtraQuestions = true;
      questionsToShow = 5;
      filteredQuestions = originalQuestions.slice(0, 5);
      totalQuestions = filteredQuestions.length;
      alert("Du hade¬†" + wrongCount +¬†" fel ‚Äì h√§r kommer 2 extra uppgifter f√∂r tr√§ning üí™");
      showQuestion();
      return;
    }
    // Om wrongCount √§r 0 eller 1, s√• avslutar vi direkt efter 3
  }

  // --- Resten av din befintliga ‚Äúquiz √§r klart‚Äù-kod nedan ---
  document.getElementById("chart").style.display = "block";

  const username = localStorage.getItem("loggedInUser");
  if (username) {
    const existing = JSON.parse(localStorage.getItem("results_" + username)) || [];
    existing.push({
      date: new Date().toLocaleString(),
      score: `${correctFirstTry} av ${totalQuestions}`,
      percent: Math.round((correctFirstTry / totalQuestions) * 100)
    });
    localStorage.setItem("results_" + username, JSON.stringify(existing));
  }

  document.getElementById("question").innerText = "Du √§r klar!";
  document.getElementById("answerInput").style.display = "none";
  document.querySelectorAll("#exerciseSection button, #exerciseSection input").forEach(el => {
    el.style.display = "none";
  });
  document.getElementById("feedback").innerText = "";
  document.getElementById("explanation").innerText = "";

  
 console.log("Slutf√∂r quiz och skapa diagram");

  // Ber√§kna procent f√∂r r√§tt p√• f√∂rsta f√∂rs√∂ket
  const percentage = Math.round((correctFirstTry / totalQuestions) * 100);
  console.log("R√§tt p√• f√∂rsta f√∂rs√∂ket:", correctFirstTry);
  console.log("Totalt antal fr√•gor:", totalQuestions);
  console.log("Procent r√§tt p√• f√∂rsta f√∂rs√∂ket:", percentage);

  // F√•nga canvasen f√∂r diagrammet
  const ctx = document.getElementById('chart').getContext('2d');

  // Kontrollera om canvas √§r tillg√§nglig
  if (!ctx) {
    console.error("Kan inte hitta canvas med ID 'chart'.");
    return;
  }

  // Skapa diagrammet med Chart.js
  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['R√§tt p√• f√∂rsta f√∂rs√∂ket', 'Ej r√§tt p√• f√∂rsta'],
      datasets: [{
        data: [correctFirstTry, totalQuestions - correctFirstTry],
        backgroundColor: ['#4caf50', '#f44336'], // Gr√∂n och r√∂d f√§rg
      }]
    },
    options: {
      plugins: {
        title: {
          display: true,
          text: `Du fick ${percentage}% r√§tt p√• f√∂rsta f√∂rs√∂ket`
        }
      }
    }
  });
  
  

 // üéØ Feedback per kategori
 let feedbackText = "<h3>üìò Vad du kan tr√§na mer p√•:</h3><ul>";
  let somethingToTrain = false;

  for (const [category, stats] of Object.entries(firstTryStats)) {
    const percent = (stats.correct / stats.total) * 100;
    if (percent < 80) {
      somethingToTrain = true;
      const catName = {
        fraction: "Addition",
        subtraction: "Subtraktion",
        multiplication: "Multiplikation",
        division: "Division",
        compare_order: "J√§mf√∂relse & ordning",
        equation: "Ekvationer",
        "word problem": "Textuppgifter"
      }[category] || category;

      feedbackText += `<li>üî∏ <strong>${catName}</strong> ‚Äì ${Math.round(percent)}% r√§tt p√• f√∂rsta f√∂rs√∂ket</li>`;
    }
  }
  feedbackText += "</ul>";

  if (!somethingToTrain) {
    feedbackText = "<h3>üéâ Fantastiskt jobbat!</h3><p>Du klarade alla kategorier med minst 80% r√§tt p√• f√∂rsta f√∂rs√∂ket. Forts√§tt s√•!</p>";
  }

  // Visa feedbacken under diagrammet
  document.getElementById("explanation").innerHTML = feedbackText;
  formatFractionsInElement("explanation");
  formatFractionsInElement("feedback");
  formatFractionsInElement("question");
  

}

document.getElementById("chart").style.display = "block";

    showQuestion();

    function showIntro() {
  filteredQuestions = []; // üßº rensa fr√•gor
  document.getElementById("bubbleWrapper").style.display = "flex"; // ‚úÖ Visa bubblor
  document.getElementById("introSection").style.display = "block";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("infoSection").style.display = "none";
  document.getElementById("categorySection").style.display = "none";
  document.getElementById("introImage").style.display = "block";
  document.getElementById("myResultsSection").style.display = "none";
  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("categoryIntroSection").style.display = "none"; 
}

function hideBubbles() {
  const bubbles = document.getElementById("bubbleWrapper");
  if (bubbles) bubbles.style.display = "none";
}

function startExercises() {
  const user = localStorage.getItem("loggedInUser");
  if (!user) {
    alert("Du m√•ste logga in f√∂r att anv√§nda Br√•k√∂vningar.");
    return;
  }

  // Rensa statistik och g√∂m andra sektioner
  filteredQuestions = [];
  firstTryStats = {};

  document.getElementById("introSection").style.display = "none";
  document.getElementById("introImage").style.display = "none";
  document.getElementById("infoSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("categoryIntroSection").style.display = "none";
  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("myResultsSection").style.display = "none";

  // ‚úÖ Visa kategoriv√§ljaren korrekt
  document.getElementById("categorySection").style.display = "block";
}


function showInfo() {
  document.getElementById("introSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("infoSection").style.display = "block";
  document.getElementById("categorySection").style.display = "none"; // ‚úÖ VIKTIG
  document.getElementById("introImage").style.display = "none"; // D√∂lj bilden
  document.getElementById("myResultsSection").style.display = "none";
  formatFractionsInElement("infoSection");


}

function goBackToCategory() {
  document.getElementById("categoryIntroSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("categorySection").style.display = "block";
  document.getElementById("feedback").innerText = "";
  document.getElementById("explanation").innerText = "";
  document.getElementById("answerInput").value = "";

  // √Öterst√§ll canvas och eventuell grafik
  const oldChart = Chart.getChart("chart");
  if (oldChart) {
    oldChart.destroy();
  }
  document.getElementById("chart").getContext("2d").clearRect(0, 0, 400, 400);
}

function createFraction(numerator, denominator) {
  return `<span class="fraction">
            <span class="numerator">${numerator}</span>
            <span class="denominator">${denominator}</span>
          </span>`;
}

function goToPrevious() {
  if (currentQuestion > 0) {
    currentQuestion--;
    showQuestion();
  }
}

function showSelfTest() {
  hideBubbles();
  document.getElementById("selfTestSection").style.display = "block";

  const user = localStorage.getItem("loggedInUser");
  if (!user) {
    alert("Du m√•ste logga in f√∂r att anv√§nda Testa dig sj√§lv.");
    return;
  }

 // üßº D√∂lj kategori-intro om det √§r √∂ppet
 document.getElementById("categoryIntroSection").style.display = "none";
document.getElementById("introSection").style.display = "none";
document.getElementById("categorySection").style.display = "none";
document.getElementById("exerciseSection").style.display = "none";
document.getElementById("infoSection").style.display = "none";
document.getElementById("selfTestSection").style.display = "block";
document.getElementById("introImage").style.display = "none";
document.getElementById("myResultsSection").style.display = "none";
}

function startSelfTest() {
  document.getElementById("categoryIntroSection").style.display = "none";

 // Rensa gammalt diagram (l√§gg in h√§r!)
 const oldChart = Chart.getChart("chart");
  if (oldChart) {
    oldChart.destroy();
  }
  document.getElementById("chart").getContext("2d").clearRect(0, 0, 400, 400);


  //  Rensa gammal statistik
  firstTryStats = {};
  filteredQuestions = []; // üîÑ Viktigt!
  const checkboxes = document.querySelectorAll('#selfTestOptions input[type="checkbox"]:checked');
  const selected = Array.from(checkboxes).map(cb => cb.value);

  if (selected.length === 0) {
    alert("V√§lj minst en kategori f√∂r att starta testet.");
    return;
  }

  const selectedQuestions = questions.filter(q => selected.includes(q.category));
  filteredQuestions = [...selectedQuestions];
  shuffleArray(filteredQuestions);
  currentQuestion = 0;
  totalQuestions = filteredQuestions.length;
  correctFirstTry = 0;

  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "block";
  
  showQuestion();
}

function startFinalTest() {
  // Rensa gammalt diagram om det finns
  const oldChart = Chart.getChart("chart");
  if (oldChart) {
    oldChart.destroy();
  }
  const chartEl = document.getElementById("chart");
  chartEl.style.display = "none";
  chartEl.getContext("2d").clearRect(0, 0, chartEl.width, chartEl.height);

  // Rensa gammal statistik
  firstTryStats = {};
  filteredQuestions = [...questions];
  shuffleArray(filteredQuestions);
  currentQuestion = 0;
  totalQuestions = filteredQuestions.length;
  correctFirstTry = 0;

  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "block";
  showQuestion();
}

// Enkel array-blandning (Fisher-Yates)
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function login() {
  const username = document.getElementById("username").value.trim();
  if (!username) {
    document.getElementById("loginStatus").innerText = "Skriv ett namn!";
    return;
  }

  localStorage.setItem("loggedInUser", username);

  // üõ† Viktigt att spara innan vi anropar indikatorn
  updateLoginIndicator(); // ‚úÖ Se till att detta kommer efter att du sparat anv√§ndarnamnet

  if (!localStorage.getItem("results_" + username)) {
    localStorage.setItem("results_" + username, JSON.stringify([]));
  }

  document.getElementById("loginSection").style.display = "none";
  document.getElementById("introSection").style.display = "block";
}

window.onload = function () {
  const user = localStorage.getItem("loggedInUser");
  if (user) {
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("introSection").style.display = "flex";
  } else {
    document.getElementById("loginSection").style.display = "flex";
    document.getElementById("introSection").style.display = "none";
  }
  updateLoginIndicator();
};


function showMyResults() {
  hideBubbles();
  document.getElementById("myResultsSection").style.display = "block";

  const user = localStorage.getItem("loggedInUser");
  if (!user) {
    alert("Du m√•ste vara inloggad.");
    return;
  }

  const resultData = JSON.parse(localStorage.getItem("results_" + user)) || [];
  console.log("Visar resultat f√∂r", user, resultData);

  if (resultData.length === 0) {
    document.getElementById("myResultsOutput").innerHTML = "<p>Inga resultat sparade √§nnu.</p>";
  } else {
    let html = "<ul>";
    resultData.forEach(res => {
      html += `<li>${res.date} ‚Äì ${res.score} (${res.percent}%)</li>`;
    });
    html += "</ul>";
    document.getElementById("myResultsOutput").innerHTML = html;
  }

  document.getElementById("introSection").style.display = "none";
  document.getElementById("myResultsSection").style.display = "block";
  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("categorySection").style.display = "none";
  document.getElementById("infoSection").style.display = "none";
  document.getElementById("categoryIntroSection").style.display = "none";

}

function logout() {
  localStorage.removeItem("loggedInUser");
  document.getElementById("loginSection").style.display = "block";
  document.getElementById("introSection").style.display = "none";
  document.getElementById("selfTestSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "none";
  document.getElementById("categorySection").style.display = "none";
  document.getElementById("myResultsSection").style.display = "none";
  document.getElementById("infoSection").style.display = "none";
  updateLoginIndicator();
  document.getElementById("logoutBtn").style.display = "none";
}

function updateLoginIndicator() {
  const user = localStorage.getItem("loggedInUser");
  console.log("üîç Inloggningsindikator k√∂rs ‚Äì anv√§ndare:", user); // üëà Logg

  const indicator = document.getElementById("loginIndicator");
  const logoutBtn = document.getElementById("logoutBtn");

  if (indicator) {
    if (user) {
      indicator.innerText = `üîì Inloggad som: ${user}`;
      if (logoutBtn) logoutBtn.style.display = "inline";
    } else {
      indicator.innerText = `üîí Inte inloggad`;
      if (logoutBtn) logoutBtn.style.display = "none";
    }
  } else {
    console.warn("üö´ Hittar inte loginIndicator-elementet!");
  }
}

function updateProgressBar() {
  const progress = ((currentQuestion + 1) / totalQuestions) * 100;
  document.getElementById("progressBar").style.width = progress + "%";
}

function showTip() {
  const q = filteredQuestions[currentQuestion];
  const tipBox = document.getElementById("tipBox");

  if (!q || !tipBox) return;

  if (q.tips && q.tips.length > 0) {
    const rawTip = "üí° " + q.tips[0];
    const formattedTip = formatFractionsInText(rawTip);
    tipBox.innerHTML = formattedTip;
  } else {
    tipBox.innerHTML = "üí° Denna fr√•ga har inget tips.";
  }
}

function beginCategoryExercise() {
  // üßº Rensa gammalt diagram
  const oldChart = Chart.getChart("chart");
if (oldChart) {
  oldChart.destroy();
}
const chartEl = document.getElementById("chart");
chartEl.style.display = "none";  // üëà
chartEl.getContext("2d").clearRect(0, 0, 400, 400);

  // üéØ H√§mta r√§tt fr√•gor beroende p√• vald kategori
  originalQuestions = selectedCategory === "all"
    ? [...questions]
    : questions.filter(q => q.category === selectedCategory);

  if (originalQuestions.length === 0) {
    alert("Inga fr√•gor hittades f√∂r denna kategori.");
    return;
  }

  // üé≤ Starta med endast 3 fr√•gor f√∂rst
  questionsToShow = 3;
  unlockExtraQuestions = false;
  filteredQuestions = originalQuestions.slice(0, questionsToShow);

  // üî¢ Nollst√§ll statistik
  firstTryStats = {};
  currentQuestion = 0;
  totalQuestions = filteredQuestions.length;
  correctFirstTry = 0;
  attempts = 0;

  // üßº Rensa gr√§nssnittet
  document.getElementById("categoryIntroSection").style.display = "none";
  document.getElementById("exerciseSection").style.display = "block";
  document.getElementById("feedback").innerText = "";
  document.getElementById("explanation").innerText = "";
  document.getElementById("answerInput").value = "";
  document.getElementById("nextBtn").style.display = "none";

  // üöÄ Visa f√∂rsta fr√•gan
  showQuestion();
}


// Visualisera br√•k i HTML
function formatFractionsInElement(elementId) {
  const el = document.getElementById(elementId);
  if (!el) return;

  el.innerHTML = el.innerHTML.replace(/(\([^()]+\)|\d+(?:[+\-*]\d+)*?)\/(\([^()]+\)|\d+(?:[+\-*]\d+)*?)/g, (match, num, den) => {
    return `<span class="fraction"><span class="numerator">${num}</span><span class="denominator">${den}</span></span>`;
  });
}



function showTopic(topic) {
  const content = {
    intro: `
      <h3>üìå Introduktion till br√•k</h3>
       <h4><strong>Vad √§r ett br√•ktal?</strong></h4>
      <p>Ett br√•k best√•r av en t√§ljare (√∂verst) och en n√§mnare (nederst).</p>
      <p>T√§ljaren anger hur m√•nga delar vi har, medan n√§mnaren anger hur m√•nga lika stora delar helheten √§r uppdelad i.</p>
      <img src="brak1.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
      <p>Exempel: Visualisering av <strong>1/6</strong>.</p>
       <img src="brak17.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <p>Exempel: Visualisering av <strong>6/6</strong>.</p>
       <img src="brak16.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
      <h4><strong>Br√•ktal i enklaste form</strong></h4>
      <p>Det st√•r ofta i uppgiften att man ska ange svaret i enklaste form. Det betyder att om svaret inneh√•ller ett br√•k, ska vi f√∂rs√∂ka g√∂ra det s√• enkelt som m√∂jligt.</p>
      <p>Exempel: Om vi har br√•ktalet <strong>8/12</strong>, s√• kan vi f√∂rkorta det till <strong>2/3</strong>.</p>
      <p>B√•de 8 och 12 kan delas med 4, s√• vi f√∂rkortar br√•ket: 8/12 = (8 √∑ 4)/(12 √∑ 4) = 2/3</p>
            <img src="brak18.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
                   
                    <h4><strong>Blandad form</strong></h4>
      <p>N√§r man skriver ett br√•ktal i blandad form, ber√§ttar man f√∂rst hur m√•nga hela bitar det finns. Sedan skriver man det som √§r kvar som ett br√•k.</p>
            <img src="brak19.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
                   <p style="font-size: 0.8em; color: gray; margin-top: -10px;">Exempel: 9/4 skrivs i blandad form som: 2 1/4 </p>
  <p>Tv√•an kallas f√∂r heltalsdel och en fj√§rdedel kallas f√∂r br√•kdel.</p>
   <img src="brak20.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">




    `,
    add: `
      <h3>‚ûï Addition av br√•k</h3>
      <h4><strong>Addition med samma n√§mnare</strong></h4>
      <p>F√∂r att addera br√•k med samma n√§mnare, l√§gg ihop t√§ljarna och beh√•ll n√§mnaren.</p>
       <img src="brak2.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <p style="font-size: 0.8em; color: gray; margin-top: -10px;">Bildk√§lla: <em>eddler.se</em></p>
       <h5><strong>Addition med olika n√§mnare</strong></h5>

      <p>N√§r vi ska addera br√•ktal som har olika n√§mnare, beh√∂ver vi f√∂rst se till att br√•ken har samma n√§mnare. F√∂r att g√∂ra det, f√∂rl√§nger eller f√∂rkortar vi br√•ken s√• att n√§mnarna blir lika.</p>
      <p>N√§r br√•ken har gemensam n√§mnare, kan vi enkelt l√§gga ihop t√§ljarna. N√§mnaren beh√•ller vi som den √§r.</p>
      <p>Exempel:</p>
       <img src="brak3.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <p style="font-size: 0.8em; color: gray; margin-top: -10px;">K√§lla: <em>eddler.se</em></p>

    
    `,
    sub: `
      <h3>‚ûñ Subtraktion av br√•k</h3>
      <h4><strong>Subtraktion med samma n√§mnare</strong></h4>
      <p>Precis som n√§r vi adderar br√•ktal med samma n√§mnare, g√∂r vi p√• liknande s√§tt n√§r vi subtraherar.</p>
      <p>Subtrahera t√§ljarna och beh√•ll n√§mnaren.</p>
       <img src="brak4.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <h5><strong>Subtraktion med olika n√§mnare</strong></h5>
       
      <p>N√§r vi ska subtrahera br√•ktal som har olika n√§mnare, m√•ste vi f√∂rst g√∂ra s√• att br√•ken f√•r samma n√§mnare. </p>
      <p>Det g√∂r vi genom att f√∂rl√§nga eller f√∂rkorta br√•ken s√• att n√§mnarna blir lika.</p>
      <p>N√§r br√•ken har gemensam n√§mnare, kan vi enkelt subtrahera t√§ljarna. N√§mnaren beh√•ller vi som den √§r.</p>
       <p>Exempel:<p> <img src="brak5.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">

    `,
    mult: `
      <h3>‚úñÔ∏è Multiplikation av br√•k</h3>
      <h4><strong>Regel f√∂r att multiplicera br√•k</strong></h4>
            <p>Multiplicera t√§ljare med t√§ljare, n√§mnare med n√§mnare:</p>
       <img src="brak8.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <p style="font-size: 0.8em; color: gray; margin-top: -10px;">Bildk√§lla: <em>eddler.se</em></p>
       <p>Exempel: <p> <img src="brak9.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
        
    `,


    div: `
      <h3>‚ûó Division av br√•k</h3>
      <h4><strong>Regel f√∂r att dividera br√•k</strong></h4>
      <p>F√∂r att dividera tv√• br√•k v√§nder man p√• det andra br√•ket (tar det omv√§nt) och multiplicerar sedan br√•ken med varandra.</p>
      <p>Det inneb√§r att man multiplicerar t√§ljaren i det f√∂rsta br√•ket med n√§mnaren i det andra, och n√§mnaren i det f√∂rsta br√•ket med t√§ljaren i det andra.</p>
       <img src="brak6.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
       <p style="font-size: 0.8em; color: gray; margin-top: -10px;">Bildk√§lla: <em>eddler.se</em></p>
       <h5><strong>Dividera br√•k med heltal</strong></h5>
       
      <p>N√§r du ska dividera ett heltal med ett br√•k eller ett br√•k med ett heltal, b√∂rjar du med att skriva om heltalet som ett br√•k. Till exempel: </p>
       <p>Exempel:<p> <img src="brak21.png" alt="Exempel p√• br√•ktal" style="max-width: 100%; height: auto; margin: 10px 0;">
      

    
    `
  };

  document.getElementById("topicContent").innerHTML = content[topic];
}


    // Omvandlar f√∂rklaringen till radbrytningar med hj√§lp av <br>
    const explanationText = data.explanation.join('<br>'); // S√§tter in <br> mellan varje element

    // Skriver ut f√∂rklaringen i HTML med innerHTML
    document.getElementById("explanation").innerHTML = explanationText;


    function isMinorCalculationError(userAnswer, correctAnswer) {
  if (!userAnswer.includes('/') || !correctAnswer.includes('/')) return false;

  const [userNum, userDen] = userAnswer.split('/').map(Number);
  const [_, correctDen] = correctAnswer.split('/').map(Number); // Vi bryr oss bara om n√§mnaren

  if (isNaN(userDen) || isNaN(correctDen)) return false;

  // ‚úÖ N√§mnaren √§r r√§tt ‚Äì oavsett vad t√§ljaren √§r
  return userDen === correctDen;
}

function isMultiplicationMethodCorrect(userAnswer, correctAnswer, questionText) {
  if (!questionText.includes("*") && !questionText.includes("√ó")) return false;

  const fractions = questionText.match(/\d+\/\d+/g);
  if (!fractions || fractions.length < 2) return false;

  let userNum, userDen;
  if (userAnswer.includes("/")) {
    [userNum, userDen] = userAnswer.split("/").map(Number);
  } else {
    userNum = Number(userAnswer);
    userDen = 1;
  }

  let correctNumerator = 1;
  let correctDenominator = 1;

  for (let frac of fractions) {
    const [num, den] = frac.split("/").map(Number);
    correctNumerator *= num;
    correctDenominator *= den;
  }

  // ‚úîÔ∏è R√§tt t√§ljare, ‚ùå fel n√§mnare
  return (
    userNum === correctNumerator &&
    userDen !== correctDenominator
  );
}


function toggleCalculator() {
  const calc = document.getElementById("calculator");
  calc.style.display = calc.style.display === "none" ? "block" : "none";

   // Reset position (optional)
   if (calc.style.display === "block") {
    calc.style.top = "auto";
    calc.style.left = "auto";
    calc.style.bottom = "20px";
    calc.style.right = "20px";
  }

}

function calcInput(val) {
  const display = document.getElementById("calcDisplay");
  display.value += val;
}

function calculate() {
  const display = document.getElementById("calcDisplay");
  try {
    display.value = eval(display.value);
  } catch {
    display.value = "Fel!";
  }
}

function clearCalc() {
  document.getElementById("calcDisplay").value = "";
}

makeDraggable(document.getElementById("calculator"), document.getElementById("calcHeader"));

function makeDraggable(dragTarget, dragHandle) {
  let posX = 0, posY = 0, mouseX = 0, mouseY = 0;

  dragHandle.onmousedown = dragMouseDown;

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    mouseX = e.clientX;
    mouseY = e.clientY;
    document.onmouseup = closeDragElement;
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    posX = mouseX - e.clientX;
    posY = mouseY - e.clientY;
    mouseX = e.clientX;
    mouseY = e.clientY;
    dragTarget.style.top = (dragTarget.offsetTop - posY) + "px";
    dragTarget.style.left = (dragTarget.offsetLeft - posX) + "px";
    dragTarget.style.bottom = "auto";
    dragTarget.style.right = "auto";
  }

  function closeDragElement() {
    document.onmouseup = null;
    document.onmousemove = null;
  }
}



function toggleCalculator() {
  const calc = document.getElementById("calculator");
  calc.style.display = (calc.style.display === "block") ? "none" : "block";
}

function calcInput(value) {
  const display = document.getElementById("calcDisplay");
  display.value += value;
}

function calculate() {
  const display = document.getElementById("calcDisplay");
  try {
    const result = eval(display.value);
    display.value = result;
  } catch (e) {
    display.value = "Fel!";
  }
}

function clearCalc() {
  document.getElementById("calcDisplay").value = "";
}

function insertSpaceBeforeFractions(text) {
  // S√§tt in mellanslag mellan bokst√§ver och br√•ktal, t.ex. "Ber√§kna2/5" ‚Üí "Ber√§kna 2/5"
  return text.replace(/([a-zA-Z√•√§√∂√Ö√Ñ√ñ])(\d+\s*\/\s*\d+)/g, '$1 $2');
}

function formatFractionsInText(text) {
  // 1. F√∂rst, formatera alla enkla br√•k (1/2, x/3 osv)
  text = text.replace(/(?<![\w>])([a-zA-Z0-9]+)\/([a-zA-Z0-9]+)(?![\w<])/g, (match, top, bottom) => {
    return `<span class="fraction"><span class="top">${top}</span><span class="bottom">${bottom}</span></span>`;
  });

  // 2. Sedan, formatera n√§stlade br√•k: t.ex. 2/(1/13)
  text = text.replace(
    /([a-zA-Z0-9]+)\s*\/\s*\(<span class="fraction">([\s\S]+?)<\/span>\)/g,
    (match, outerTop, innerFraction) => {
      return `<span class="fraction"><span class="top">${outerTop}</span><span class="bottom">${innerFraction}</span></span>`;
    }
  );

  return text;
}


</script>



  
</body>
</html>


